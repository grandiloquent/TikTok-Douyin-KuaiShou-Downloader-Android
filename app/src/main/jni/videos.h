#define VIDEOS "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>视频列表</title>\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n<style>\r\nbutton {\r\n    padding: 0;\r\n    border: none;\r\n    outline: none;\r\n    font: inherit;\r\n    text-transform: inherit;\r\n    color: inherit;\r\n    background: transparent\r\n}\r\n\r\nhtml {\r\n    color: #0f0f0f;\r\n    background-color: #fff;\r\n    font-size: 10px;\r\n    font-family: Roboto, Arial, sans-serif\r\n}\r\n\r\nbody {\r\n    margin: 0;\r\n    padding: 0;\r\n    padding: 0 env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);\r\n    font-size: 1.2rem;\r\n    overflow-x: hidden\r\n}\r\n\r\nheader {\r\n    height: 48px\r\n}\r\n\r\n* {\r\n    -ms-flex: 0 1 auto\r\n}\r\n\r\n\r\nhtml {\r\n    word-wrap: break-word;\r\n    color: #0f0f0f;\r\n    background-color: #fff;\r\n    -webkit-text-size-adjust: 100%\r\n}\r\n\r\ninput,\r\ntextarea {\r\n    background-color: transparent;\r\n    padding-bottom: 4px;\r\n    outline: none;\r\n    box-sizing: border-box;\r\n    border: none;\r\n    border-radius: 0;\r\n    margin-bottom: 1px;\r\n    font: inherit;\r\n    color: #0f0f0f\r\n}\r\n\r\ninput::-webkit-input-placeholder,\r\ntextarea::-webkit-input-placeholder {\r\n    color: #606060;\r\n    opacity: 1\r\n}\r\n\r\ninput::placeholder,\r\ntextarea::placeholder {\r\n    color: #606060;\r\n    opacity: 1\r\n}\r\n\r\ntextarea {\r\n    -webkit-appearance: none;\r\n    appearance: none;\r\n    min-height: 8.4rem;\r\n    width: 100%;\r\n    border: 1px solid rgba(0, 0, 0, 0.1);\r\n    padding: 8px\r\n}\r\n\r\ninput {\r\n    border-bottom: 1px solid #737373;\r\n    text-overflow: ellipsis\r\n}\r\n\r\ninput:focus {\r\n    margin-bottom: 0;\r\n    border-bottom-width: 2px;\r\n    border-bottom-color: #0f0f0f\r\n}\r\n\r\nform {\r\n    margin: 0\r\n}\r\n\r\na {\r\n    color: currentColor;\r\n    text-decoration: none\r\n}\r\n\r\nstrong,\r\nb {\r\n    font-weight: 500\r\n}\r\n\r\nh1,\r\nh2,\r\nh3,\r\nh4 {\r\n    margin: 0 0 3px\r\n}\r\n\r\nh2 {\r\n    font-size: 1.8rem\r\n}\r\n\r\nh3 {\r\n    font-size: 1.4rem\r\n}\r\n\r\nh4 {\r\n    font-size: 1.3rem\r\n}\r\n\r\nimg {\r\n    min-width: 1px;\r\n    min-height: 1px;\r\n    -webkit-filter: none;\r\n    filter: none\r\n}\r\n\r\n:focus {\r\n    outline: none\r\n}\r\n\r\np {\r\n    margin: 8px 0;\r\n    line-height: 1.25\r\n}</style></head>\r\n\r\n<body>\r\n    <style>\r\n        body {\r\n            display: flex;\r\n            flex-direction: column;\r\n        }\r\n    </style>\r\n    <custom-drawer bind=\"customDrawer\"></custom-drawer>\r\n    <custom-header title=\"首页\" bind=\"\" @submit=\"showDrawer\"></custom-header>\r\n    <div style=\"height: 56px;\"></div>\r\n    <custom-videos bind=\"customVideos\" @submit=\"onVideosHandler\"></custom-videos>\r\n    <div style=\"height: 49px;\"></div>\r\n    <custom-bottom-bar bind=\"customBottomBar\" @submit=\"navigate\"></custom-bottom-bar>\r\n    <custom-dialog-actions bind=\"customDialogActions\" @submit=\"onActionsHanlder\" style=\"display:none;\">\r\n    </custom-dialog-actions>\r\n    <custom-dialog bind=\"customDialog\" @submit=\"onDialogHandler\" style=\"display:none;\"></custom-dialog>\r\n    <custom-toast bind=\"customToast\"></custom-toast>\r\n    <custom-dialog-spinner bind=\"customDialogSpinner\" style=\"display:none;\"></custom-dialog-spinner>\r\n    \r\n<script>class CustomHeader extends HTMLElement {\n\n  constructor() {\n    super();\n    this.attachShadow({\n      mode: 'open'\n    });\n    const style = document.createElement('style');\n    style.textContent = `.header {\n  color: black;\n  min-width: 320px;\n  transition: box-shadow 250ms;\n  top: 0;\n  width: 100%;\n  display: block;\n  font: 13px/27px Roboto, Arial, sans-serif;\n  z-index: 986;\n  position: fixed;\n  left: 0;\n  right: 0;\n  background-color: rgba(255, 255, 255, 1);\n}\n\n.wrapper {\n  box-sizing: border-box;\n  position: relative;\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  transition: background-color .4s;\n  padding: 4px;\n  padding-left: 8px;\n  min-width: 0;\n}\n\n.left {\n  height: 48px;\n  vertical-align: middle;\n  white-space: nowrap;\n  -webkit-box-align: center;\n  align-items: center;\n  display: flex;\n  -webkit-user-select: none;\n  box-sizing: border-box;\n  padding-right: 14px;\n  flex: 1 1 auto;\n  overflow: hidden;\n}\n\n.middle {\n  height: 48px;\n  white-space: nowrap;\n  align-items: center;\n  display: flex;\n  -webkit-user-select: none;\n  justify-content: flex-end;\n  flex: 0 0 auto;\n}\n\n.svg {\n  fill: currentColor;\n  opacity: 1;\n  border-radius: 50%;\n  padding: 8px;\n  margin: 3px;\n  color: unset;\n  margin-left: 1px;\n  margin-right: 1px;\n}\n\n.title {\n  display: inline-block;\n  font-size: 22px;\n  line-height: 24px;\n  position: relative;\n  vertical-align: middle;\n  color: #5f6368;\n  opacity: 1;\n  padding-left: 0;\n}\n\n.hamburger-menu {\n  border-radius: 50%;\n  display: inline-block;\n  padding: 12px;\n  overflow: hidden;\n  vertical-align: middle;\n  cursor: pointer;\n  height: 24px;\n  width: 24px;\n  -webkit-user-select: none;\n  flex: 0 0 auto;\n  margin: 0 4px 0 0;\n}`;\n    this.shadowRoot.append(style);\n  }\n  get showing() {\n    return this.isShowing || false;\n  }\n  set showing(val) {\n    if (val) {\n      this.header.style = 'box-shadow:0px 4px 5px 0px rgb(0 0 0 / 14%), 0px 1px 10px 0px rgb(0 0 0 / 12%), 0px 2px 4px -1px rgb(0 0 0 / 20%)';\n    } else {\n      this.header.style = '';\n    }\n    this.isShowing = val;\n  }\n  showDrawer() {\n    this.dispatchEvent(new CustomEvent('submit'));\n  }\n\n  connectedCallback() {\n    const header = document.createElement('div');\n    header.setAttribute(\"bind\", \"header\");\n    header.setAttribute(\"class\", \"header\");\n    if (this.showing) {\n      header.setAttribute('style', 'box-shadow:0px 4px 5px 0px rgb(0 0 0 / 14%), 0px 1px 10px 0px rgb(0 0 0 / 12%), 0px 2px 4px -1px rgb(0 0 0 / 20%)');\n    }\n    this.shadowRoot.appendChild(header);\n    const wrapper = document.createElement('div');\n    wrapper.setAttribute(\"class\", \"wrapper\");\n    header.appendChild(wrapper);\n    const left = document.createElement('div');\n    left.setAttribute(\"class\", \"left\");\n    wrapper.appendChild(left);\n    const hamburgerMenu = document.createElement('div');\n    hamburgerMenu.setAttribute(\"class\", \"hamburger-menu\");\n\n    left.appendChild(hamburgerMenu);\n    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svg.setAttribute(\"focusable\", \"false\");\n    svg.setAttribute(\"viewBox\", \"0 0 24 24\");\n    hamburgerMenu.appendChild(svg);\n    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    path.setAttribute(\"d\", \"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\");\n    svg.appendChild(path);\n    const title = document.createElement('div');\n    title.setAttribute(\"class\", \"title\");\n    left.appendChild(title);\n    title.textContent = `${this.getAttribute('title')}`;\n    const middle = document.createElement('div');\n    middle.setAttribute(\"class\", \"middle\");\n    wrapper.appendChild(middle);\n    const svg1 = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svg1.setAttribute(\"class\", \"svg\");\n    svg1.setAttribute(\"focusable\", \"false\");\n    svg1.setAttribute(\"height\", \"24px\");\n    svg1.setAttribute(\"viewBox\", \"0 0 24 24\");\n    svg1.setAttribute(\"width\", \"24px\");\n    svg1.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\n    middle.appendChild(svg1);\n    const path2 = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    path2.setAttribute(\"d\", \"M20.49,19l-5.73-5.73C15.53,12.2,16,10.91,16,9.5C16,5.91,13.09,3,9.5,3S3,5.91,3,9.5C3,13.09,5.91,16,9.5,16 c1.41,0,2.7-0.47,3.77-1.24L19,20.49L20.49,19z M5,9.5C5,7.01,7.01,5,9.5,5S14,7.01,14,9.5S11.99,14,9.5,14S5,11.99,5,9.5z\");\n    svg1.appendChild(path2);\n    const path3 = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    path3.setAttribute(\"d\", \"M0,0h24v24H0V0z\");\n    path3.setAttribute(\"fill\", \"none\");\n    svg1.appendChild(path3);\n\n    middle.addEventListener('click', evt => {\n      this.dispatchEvent(new CustomEvent('search'));\n    })\n    hamburgerMenu.addEventListener('click', this.showDrawer.bind(this))\n    document.addEventListener(\"scroll\", () => {\n      this.showing = window.scrollY > 56;\n    });\n  }\n}\ncustomElements.define('custom-header', CustomHeader);\n/*\n<!--\n<script type=\"module\" src=\"./components/custom-header.js\"></script>\n<custom-header></custom-header>\ncustomElements.whenDefined('custom-header').then(() => {\n  customHeader.data = []\n})\n-->\n*/</script><script>class CustomDrawer extends HTMLElement {\n\n  constructor() {\n    super();\n    this.attachShadow({\n      mode: 'open'\n    });\n    const wrapper = document.createElement(\"div\");\n    wrapper.setAttribute(\"class\", \"wrapper\");\n    const style = document.createElement('style');\n    style.textContent = `.name {\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n    \n    .main {\n      display: flex;\n      flex: 1 1 auto;\n      flex-direction: column;\n    }\n    \n    .overlay {\n      position: fixed;\n      right: 0;\n      top: 0;\n      left: 0;\n      bottom: 0;\n      z-index: 991;\n      cursor: pointer;\n    }\n    \n    .top {\n      position: relative;\n      top: 2px;\n      -webkit-user-select: none;\n      min-height: 48px;\n      display: table-cell;\n      height: 48px;\n      vertical-align: middle;\n      padding-top: 4px;\n      padding-bottom: 4px;\n      padding-left: 16px;\n    }\n    \n    .item {\n      text-decoration: none;\n      letter-spacing: .01785714em;\n      font-size: 14px;\n      font-weight: 500;\n      line-height: 20px;\n      height: 48px;\n      display: flex;\n      -webkit-box-align: center;\n      align-items: center;\n      padding-left: 24px;\n      padding-right: 12px;\n      margin-right: 8px;\n      border-radius: 0 50px 50px 0;\n      cursor: pointer;\n      color: inherit;\n    }\n    \n    .wrapper {\n      background-color: #fff;\n      bottom: 0;\n      color: #000;\n      overflow-x: hidden;\n      position: fixed;\n      top: 0;\n      bottom: 0;\n      z-index: 992;\n      will-change: visibility;\n      display: flex;\n      flex-direction: column;\n    }\n    \n    .divider {\n      border-bottom: 1px solid #e8eaed;\n      margin: 8px 8px 8px 0;\n    }\n    `;\n    wrapper.style = 'transition:transform .25s cubic-bezier(0.4,0.0,0.2,1),visibility 0s linear .25s;transform:translateX(-264px)'\n    const top = document.createElement('div');\n    top.setAttribute(\"class\", \"top\");\n    const main = document.createElement('div');\n    main.setAttribute(\"class\", \"main\");\n    wrapper.append(top, main);\n    this.wrapper = wrapper;\n    this.main = main;\n    const overlay = document.createElement('div');\n    overlay.setAttribute(\"class\", \"overlay\");\n    overlay.style.display = 'none';\n    this.overlay = overlay;\n    this.shadowRoot.append(style, wrapper, overlay);\n    overlay.addEventListener('click', () => {\n      this.wrapper.style = 'transition:transform .25s cubic-bezier(0.4,0.0,0.2,1),visibility 0s linear .25s;transform:translateX(-264px)'\n      this.overlay.style.display = 'none';\n    })\n  }\n \n  set data(value) {\n    value.forEach(element => {\n      const item = document.createElement('div');\n      item.setAttribute(\"bind\", \"\");\n      item.setAttribute(\"class\", \"item\");\n \n      this.main.appendChild(item);\n      const div = document.createElement('div');\n      div.style.width = \"24px\";\n      div.style.height = \"24px\";\n      div.style.fill = \"currentColor\";\n      div.style.color = \"#333\";\n      div.style.display = \"flex\";\n      div.style.alignItems = \"center\";\n      div.style.justifyContent = \"center\";\n      div.style.marginRight = \"16px\";\n      const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n      svg.setAttribute(\"viewBox\", \"0 0 24 24\");\n      svg.style.width = \"24px\";\n      svg.style.height = \"24px\";\n      item.appendChild(div);\n      div.appendChild(svg);\n      svg.innerHTML = `${element.path}`;\n      const name = document.createElement('div');\n      name.setAttribute(\"class\", \"name\");\n      item.appendChild(name);\n      name.textContent = `${element.name}`;\n      item.addEventListener('click', evt => {\n        this.dispatchEvent(new CustomEvent('submit', {\n          detail:element.href\n        }));\n      })\n    });\n\n  }\n\n  connectedCallback() {\n\n  }\n  static get observedAttributes() {\n    return ['expand'];\n  }\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (name === \"expand\") {\n      this.wrapper.style = 'transform: translateX(0);visibility: visible;box-shadow: 0 0 16px rgba(0,0,0,.28);transition: transform .25s cubic-bezier(0.4,0.0,0.2,1),visibility 0s linear 0s;overflow-y: visible;width: 256px;';\n      this.overlay.style.display = 'block';\n    }\n  }\n}\ncustomElements.define('custom-drawer', CustomDrawer);\n/*\n<!--\n<script type=\"module\" src=\"./components/custom-drawer.js\"></script>\n<custom-drawer></custom-drawer>\ncustomElements.whenDefined('custom-drawer').then(() => {\n  customDrawer.data = []\n})\n-->\n*/</script><script> class CustomVideos extends HTMLElement {\n\n  constructor() {\n    super();\n    this.attachShadow({\n      mode: 'open'\n    });\n    const wrapper = document.createElement(\"div\");\n    wrapper.setAttribute(\"class\", \"wrapper\");\n    const style = document.createElement('style');\n    style.textContent = `.image-wrapper {\n      position: relative;\n      padding-bottom: 56.25%;\n    }\n    \n    .image-background {\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      width: 100%;\n      min-height: 100%;\n      margin: auto;\n      background-color: rgba(0, 0, 0, 0.1);\n    }\n    \n    \n    .image {\n      filter: none;\n      display: inline-block;\n      min-width: 1px;\n      visibility: inherit;\n      height: 100%;\n      object-fit: cover;\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      width: 100%;\n      min-height: 100%;\n      margin: auto;\n    \n    }\n    \n    .details {\n    \n      display: flex;\n      -webkit-box-flex: 1;\n      flex-grow: 1;\n      min-width: 0;\n      margin-bottom: 16px;\n      margin-left: 12px;\n      margin-top: 4px;\n    \n    }\n    \n    .h3 {\n    \n      margin: 0 0 3px;\n      display: -webkit-box;\n      -webkit-box-orient: vertical;\n      max-height: 2.5em;\n      -webkit-line-clamp: 2;\n      overflow: hidden;\n      line-height: 1.25;\n      text-overflow: ellipsis;\n      font-size: 1.4rem;\n      font-weight: 500;\n    \n    }\n    \n    .metadata {\n    \n      display: flex;\n      -webkit-box-flex: 1;\n      flex-grow: 1;\n      -webkit-box-orient: vertical;\n      -webkit-box-direction: normal;\n      flex-direction: column;\n      min-width: 0;\n      margin-top: 8px;\n    \n    }\n    \n    .info {\n    \n      display: flex;\n      -webkit-box-flex: 1;\n      flex-grow: 1;\n      min-width: 0;\n      -webkit-box-align: start;\n      align-items: flex-start;\n      /* margin-left: 12px; */\n    \n    }`;\n    this.wrapper = wrapper;\n    this.shadowRoot.append(style, wrapper);\n  }\n  _item(evt) {\n    const index = evt.currentTarget.dataset.index;\n    this.dispatchEvent(new CustomEvent('submit', {\n      detail: index\n    }));\n  }\n  set data(value) {\n    this.wrapper.insertAdjacentHTML('afterbegin',value.map(element => {\n      return `<div bind=\"\" @click=\"_item\" data-index=\"${element.path}\">\n      <div class=\"image-wrapper\">\n<div class=\"image-background\">\n</div>\n<img class=\"image\" src=\"${this.host}/api/videos?q=${md5(element.path)}&action=1\">\n</div>\n<div class=\"details\">\n<div class=\"info\">\n<div class=\"metadata\">\n<div class=\"h3\">\n${substringAfterLast(element.path, \"/\")}\n</div>\n</div>\n</div>\n</div>\n    </div>\n`\n    }).join(''));\n    this.wrapper.querySelectorAll('[bind]').forEach(element => {\n      if (element.getAttribute('bind')) {\n        this[element.getAttribute('bind')] = element;\n      }\n      [...element.attributes].filter(attr => attr.nodeName.startsWith('@')).forEach(attr => {\n        if (!attr.value) return;\n        element.addEventListener(attr.nodeName.slice(1), evt => {\n          this[attr.value](evt);\n        });\n      });\n    })\n  }\n \n  connectedCallback() {\n  }\n    static get observedAttributes() {\n    return ['title'];\n  }\n  attributeChangedCallback(name, oldValue, newValue) {\n  }\n}\ncustomElements.define('custom-videos', CustomVideos);\n/*\n<!--\n<script type=\"module\" src=\"./components/custom-videos.js\"></script>\n<custom-videos></custom-videos>\ncustomElements.whenDefined('custom-videos').then(() => {\n  customVideos.data = []\n})\n-->\n*/\n\nfunction timeSpan(atime, btime) {\n  var milliseconds = +(btime || new Date()) - +atime;\n  var seconds = ~~(milliseconds / 1000);\n  var minutes = ~~(milliseconds / (1 * 60 * 1000));\n  var hours = ~~(milliseconds / (1 * 60 * 60 * 1000));\n  var days = ~~(milliseconds / (1 * 24 * 60 * 60 * 1000));\n  var years = ~~(days / 365.5);\n  return {\n    years,\n    days,\n    hours,\n    minutes,\n    seconds,\n    milliseconds\n  };\n}\n\nfunction timeAgo(time, locales = 'zh') {\n  const ts = timeSpan(time);\n  if (!i18n[locales]) locales = 'zh';\n  if (ts.seconds < 60) return i18n[locales].justNow;\n  if (ts.minutes < 60) return ts.minutes + ' ' + i18n[locales].minutesAgo;\n  if (ts.hours < 24) return ts.hours + ' ' + i18n[locales].hoursAgo;\n  if (ts.days < 7) return ts.days + ' ' + i18n[locales].daysAgo;\n  if (ts.days < 30) return ~~(ts.days / 7) + ' ' + i18n[locales].weeksAgo;\n  if (ts.years < 1) return ~~(ts.days / 30) + ' ' + i18n[locales].monthsAgo;\n  return ts.years + ' ' + i18n[locales].yearsAgo;\n}\n\nconst i18n = {\n  zh: {\n    justNow: '刚刚',\n    minutesAgo: '分钟前',\n    hoursAgo: '小时前',\n    daysAgo: '天前',\n    weeksAgo: '周前',\n    monthsAgo: '个月前',\n    yearsAgo: '年前',\n  },\n  en: {\n    justNow: 'just now',\n    minutesAgo: 'minutes ago',\n    hoursAgo: 'hours ago',\n    daysAgo: 'days ago',\n    weeksAgo: 'weeks ago',\n    monthsAgo: 'months ago',\n    yearsAgo: 'years ago',\n  },\n};\nfunction substringAfterLast(string, delimiter, missingDelimiterValue) {\n  const index = string.lastIndexOf(delimiter);\n  if (index === -1) {\n    return missingDelimiterValue || string;\n  } else {\n    return string.substring(index + delimiter.length);\n  }\n} function md5(inputString) {\n  var hc = \"0123456789abcdef\";\n  function rh(n) { var j, s = \"\"; for (j = 0; j <= 3; j++) s += hc.charAt((n >> (j * 8 + 4)) & 0x0F) + hc.charAt((n >> (j * 8)) & 0x0F); return s; }\n  function ad(x, y) { var l = (x & 0xFFFF) + (y & 0xFFFF); var m = (x >> 16) + (y >> 16) + (l >> 16); return (m << 16) | (l & 0xFFFF); }\n  function rl(n, c) { return (n << c) | (n >>> (32 - c)); }\n  function cm(q, a, b, x, s, t) { return ad(rl(ad(ad(a, q), ad(x, t)), s), b); }\n  function ff(a, b, c, d, x, s, t) { return cm((b & c) | ((~b) & d), a, b, x, s, t); }\n  function gg(a, b, c, d, x, s, t) { return cm((b & d) | (c & (~d)), a, b, x, s, t); }\n  function hh(a, b, c, d, x, s, t) { return cm(b ^ c ^ d, a, b, x, s, t); }\n  function ii(a, b, c, d, x, s, t) { return cm(c ^ (b | (~d)), a, b, x, s, t); }\n  function sb(x) {\n    var i; var nblk = ((x.length + 8) >> 6) + 1; var blks = new Array(nblk * 16); for (i = 0; i < nblk * 16; i++) blks[i] = 0;\n    for (i = 0; i < x.length; i++) blks[i >> 2] |= x.charCodeAt(i) << ((i % 4) * 8);\n    blks[i >> 2] |= 0x80 << ((i % 4) * 8); blks[nblk * 16 - 2] = x.length * 8; return blks;\n  }\n  var i, x = sb(inputString), a = 1732584193, b = -271733879, c = -1732584194, d = 271733878, olda, oldb, oldc, oldd;\n  for (i = 0; i < x.length; i += 16) {\n    olda = a; oldb = b; oldc = c; oldd = d;\n    a = ff(a, b, c, d, x[i + 0], 7, -680876936); d = ff(d, a, b, c, x[i + 1], 12, -389564586); c = ff(c, d, a, b, x[i + 2], 17, 606105819);\n    b = ff(b, c, d, a, x[i + 3], 22, -1044525330); a = ff(a, b, c, d, x[i + 4], 7, -176418897); d = ff(d, a, b, c, x[i + 5], 12, 1200080426);\n    c = ff(c, d, a, b, x[i + 6], 17, -1473231341); b = ff(b, c, d, a, x[i + 7], 22, -45705983); a = ff(a, b, c, d, x[i + 8], 7, 1770035416);\n    d = ff(d, a, b, c, x[i + 9], 12, -1958414417); c = ff(c, d, a, b, x[i + 10], 17, -42063); b = ff(b, c, d, a, x[i + 11], 22, -1990404162);\n    a = ff(a, b, c, d, x[i + 12], 7, 1804603682); d = ff(d, a, b, c, x[i + 13], 12, -40341101); c = ff(c, d, a, b, x[i + 14], 17, -1502002290);\n    b = ff(b, c, d, a, x[i + 15], 22, 1236535329); a = gg(a, b, c, d, x[i + 1], 5, -165796510); d = gg(d, a, b, c, x[i + 6], 9, -1069501632);\n    c = gg(c, d, a, b, x[i + 11], 14, 643717713); b = gg(b, c, d, a, x[i + 0], 20, -373897302); a = gg(a, b, c, d, x[i + 5], 5, -701558691);\n    d = gg(d, a, b, c, x[i + 10], 9, 38016083); c = gg(c, d, a, b, x[i + 15], 14, -660478335); b = gg(b, c, d, a, x[i + 4], 20, -405537848);\n    a = gg(a, b, c, d, x[i + 9], 5, 568446438); d = gg(d, a, b, c, x[i + 14], 9, -1019803690); c = gg(c, d, a, b, x[i + 3], 14, -187363961);\n    b = gg(b, c, d, a, x[i + 8], 20, 1163531501); a = gg(a, b, c, d, x[i + 13], 5, -1444681467); d = gg(d, a, b, c, x[i + 2], 9, -51403784);\n    c = gg(c, d, a, b, x[i + 7], 14, 1735328473); b = gg(b, c, d, a, x[i + 12], 20, -1926607734); a = hh(a, b, c, d, x[i + 5], 4, -378558);\n    d = hh(d, a, b, c, x[i + 8], 11, -2022574463); c = hh(c, d, a, b, x[i + 11], 16, 1839030562); b = hh(b, c, d, a, x[i + 14], 23, -35309556);\n    a = hh(a, b, c, d, x[i + 1], 4, -1530992060); d = hh(d, a, b, c, x[i + 4], 11, 1272893353); c = hh(c, d, a, b, x[i + 7], 16, -155497632);\n    b = hh(b, c, d, a, x[i + 10], 23, -1094730640); a = hh(a, b, c, d, x[i + 13], 4, 681279174); d = hh(d, a, b, c, x[i + 0], 11, -358537222);\n    c = hh(c, d, a, b, x[i + 3], 16, -722521979); b = hh(b, c, d, a, x[i + 6], 23, 76029189); a = hh(a, b, c, d, x[i + 9], 4, -640364487);\n    d = hh(d, a, b, c, x[i + 12], 11, -421815835); c = hh(c, d, a, b, x[i + 15], 16, 530742520); b = hh(b, c, d, a, x[i + 2], 23, -995338651);\n    a = ii(a, b, c, d, x[i + 0], 6, -198630844); d = ii(d, a, b, c, x[i + 7], 10, 1126891415); c = ii(c, d, a, b, x[i + 14], 15, -1416354905);\n    b = ii(b, c, d, a, x[i + 5], 21, -57434055); a = ii(a, b, c, d, x[i + 12], 6, 1700485571); d = ii(d, a, b, c, x[i + 3], 10, -1894986606);\n    c = ii(c, d, a, b, x[i + 10], 15, -1051523); b = ii(b, c, d, a, x[i + 1], 21, -2054922799); a = ii(a, b, c, d, x[i + 8], 6, 1873313359);\n    d = ii(d, a, b, c, x[i + 15], 10, -30611744); c = ii(c, d, a, b, x[i + 6], 15, -1560198380); b = ii(b, c, d, a, x[i + 13], 21, 1309151649);\n    a = ii(a, b, c, d, x[i + 4], 6, -145523070); d = ii(d, a, b, c, x[i + 11], 10, -1120210379); c = ii(c, d, a, b, x[i + 2], 15, 718787259);\n    b = ii(b, c, d, a, x[i + 9], 21, -343485551); a = ad(a, olda); b = ad(b, oldb); c = ad(c, oldc); d = ad(d, oldd);\n  }\n  return rh(a) + rh(b) + rh(c) + rh(d);\n}</script><script>class CustomDialogActions extends HTMLElement {\n\n  constructor() {\n    super();\n    this.attachShadow({\n      mode: 'open'\n    });\n    const wrapper = document.createElement(\"div\");\n    wrapper.setAttribute(\"class\", \"wrapper\");\n    const style = document.createElement('style');\n    style.textContent = `.item{\n      background:#fff;padding:9px 12px;display:flex;align-items: center;justify-content: center;\n      }.wrapper {\n  color: #0f0f0f;\n  -webkit-text-size-adjust: 100%;\n  font-size: 12px;\n  z-index: 1002;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.dialog {\n  position: relative;\n  z-index: 1002;\n  max-height: 180px;\n  overflow-y: auto;\n  color: #0f0f0f;\n  min-width: 250px;\n  max-width: 356px;\n  margin: 40px;\n  border-radius: 8px;\n  background-color: #fff;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 1px;\n  background-color: #dadce0;\noverflow-y:auto;\n\n}\n.dialog::-webkit-scrollbar{\ndisplay:none;\n}\n.overlay {\n  font-family: Roboto, Arial, sans-serif;\n  word-wrap: break-word;\n  color: #0f0f0f;\n  -webkit-text-size-adjust: 100%;\n  font-size: 1.2rem;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 1001;\n  cursor: pointer;\n  background-color: rgba(0, 0, 0, 0.3);\n}`;\n    this.wrapper = wrapper;\n    this.shadowRoot.append(style, wrapper);\n  }\n  navigate(e) {\n    this.dispatchEvent(new CustomEvent('submit', {\n      detail: e.currentTarget.dataset.href\n    }));\n  }\n  close() {\n    this.style.display = 'none';\n  }\n  set data(value) {\n    this.wrapper.insertAdjacentHTML('afterbegin',`\n    <div class=\"dialog\">\n    ${value.map(element => {\n      return `<div bind=\"\" class=\"item\" data-index=\"${element.id}\" @click=\"navigate\">\n      \n      <div class=\"item-title\">\n      ${element.title}\n        </div>\n        </div>`\n    }).join('')}\n    </div>\n    <div bind=\"\" class=\"overlay\" @click=\"close\">\n  </div>`);\n    this.wrapper.querySelectorAll('[bind]').forEach(element => {\n      if (element.getAttribute('bind')) {\n        this[element.getAttribute('bind')] = element;\n      }\n      [...element.attributes].filter(attr => attr.nodeName.startsWith('@')).forEach(attr => {\n        if (!attr.value) return;\n        element.addEventListener(attr.nodeName.slice(1), evt => {\n          this[attr.value](evt);\n        });\n      });\n    })\n  }\n  navigate(evt) {\n    const index = evt.currentTarget.dataset.index;\n    this.dispatchEvent(new CustomEvent('submit', {\n      detail: index\n    }));\n  }\n  connectedCallback() {\n  }\n    static get observedAttributes() {\n    return ['title'];\n  }\n  attributeChangedCallback(name, oldValue, newValue) {\n  }\n}\ncustomElements.define('custom-dialog-actions', CustomDialogActions);\n/*\n<!--\n<script type=\"module\" src=\"./components/custom-dialog-actions.js\"></script>\n<custom-dialog-actions></custom-dialog-actions>\ncustomElements.whenDefined('custom-dialog-actions').then(() => {\n  customDialogActions.data = []\n})\n-->\n*/</script><script>class CustomBottomBar extends HTMLElement {\n\n  constructor() {\n    super();\n    this.attachShadow({\n      mode: 'open'\n    });\n    const wrapper = document.createElement(\"div\");\n    wrapper.setAttribute(\"class\", \"wrapper\");\n    const style = document.createElement('style');\n    style.textContent = ` .item-title {\n      max-width: 100%;\n      padding: 0 4px;\n      box-sizing: border-box;\n      display: block;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n    }\n    \n    .item {\n    \n      display: flex;\n      align-items: center;\n      justify-content: center;\n      flex: 1 1 0%;\n      min-width: 0;\n      flex-direction: column;\n    \n    }\n    \n    .wrapper {\n      display: flex;\n      justify-content: space-around;\n      position: fixed;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      padding: 0 env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);\n      z-index: 3;\n      height: 48px;\n      border-top: 1px solid rgba(0, 0, 0, 0.1);\n      color: #0f0f0f;\n      font-size: 12px;\n      background: #fff;\n    user-select:none;\n    }\n    `;\n    this.wrapper = wrapper;\n    this.shadowRoot.append(style, wrapper);\n  }\n  navigate(e) {\n    this.dispatchEvent(new CustomEvent('submit', {\n      detail: e.currentTarget.dataset.href\n    }));\n  }\n  set data(value) {\n    this.wrapper.insertAdjacentHTML('afterbegin',value.map(element => {\n      return `<div bind=\"\" class=\"item\" data-href=\"${element.href}\" @click=\"navigate\">\n      <svg viewbox=\"0 0 24 24\" style=\"width:24px;height:24px;\">\n      ${element.path}\n      </svg>\n      <div class=\"item-title\">\n      ${element.title}\n        </div>\n        </div>`\n    }).join(''));\n    this.wrapper.querySelectorAll('[bind]').forEach(element => {\n      if (element.getAttribute('bind')) {\n        this[element.getAttribute('bind')] = element;\n      }\n      [...element.attributes].filter(attr => attr.nodeName.startsWith('@')).forEach(attr => {\n        if (!attr.value) return;\n        element.addEventListener(attr.nodeName.slice(1), evt => {\n          this[attr.value](evt);\n        });\n      });\n    })\n  }\n \n  connectedCallback() {\n  }\n}\ncustomElements.define('custom-bottom-bar', CustomBottomBar);\n/*\n<!--\n<script type=\"module\" src=\"./components/custom-bottom-bar.js\"></script>\n<custom-bottom-bar></custom-bottom-bar>\ncustomElements.whenDefined('custom-bottom-bar').then(() => {\n  customBottomBar.data = []\n})\n-->\n*/\n</script><script>class CustomButton extends HTMLElement {\n\n  constructor() {\n    super();\n    this.attachShadow({\n      mode: 'open'\n    });\n    const wrapper = document.createElement(\"div\");\n    wrapper.setAttribute(\"class\", \"wrapper\");\n    const style = document.createElement('style');\n    style.textContent = `.wrapper {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      cursor: pointer;\n      white-space: nowrap;\n      outline: none;\n      letter-spacing: .01785714em;\n      font-family: \"Google Sans\", Roboto, Arial, sans-serif;\n      font-size: 14px;\n      font-weight: 500;\n      line-height: 20px;\n      border-radius: 24px;\n      box-sizing: border-box;\n      border: 1px solid #dadce0;\n      color: #3c4043;\n      padding: 5px 13px;\n    }\n    \n    .selected {\n      border: 1px solid transparent;\n      background: #e8f0fe;\n      color: #1967d2;\n    }`;\n    this.wrapper = wrapper;\n    this.shadowRoot.append(style, wrapper);\n  }\n  navigate(e) {\n    this.dispatchEvent(new CustomEvent('submit', {\n      detail: e.currentTarget.dataset.href\n    }));\n  }\n\n\n  connectedCallback() {\n    this.wrapper.textContent = this.getAttribute('title');\n    if (this.getAttribute('selected')==='true') {\n      this.wrapper.classList.add('selected');\n    }\n  }\n  static get observedAttributes() {\n    return ['title', 'selected'];\n  }\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (name === 'selected') {\n      if(newValue==='true') {\n        this.wrapper.classList.add('selected');\n      }else{\n        this.wrapper.classList.remove('selected');\n      }\n    }\n  }\n}\ncustomElements.define('custom-button', CustomButton);\n/*\n<!--\n<script type=\"module\" src=\"./components/custom-button.js\"></script>\n<custom-button></custom-button>\ncustomElements.whenDefined('custom-button').then(() => {\n  customButton.data = []\n})\n-->\n*/</script><script>class CustomButtons extends HTMLElement {\n\n  constructor() {\n    super();\n    this.attachShadow({\n      mode: 'open'\n    });\n    const wrapper = document.createElement(\"div\");\n    wrapper.setAttribute(\"class\", \"wrapper\");\n    const style = document.createElement('style');\n    style.textContent = `.wrapper{\n      display:flex;align-items: center;gap:8px;\n      overflow-x:scroll;\n      user-select:none;\n      padding:16px;\n      }\n      .wrapper::-webkit-scrollbar{\n        display:none;\n      }\n      `;\n    this.wrapper = wrapper;\n    this.shadowRoot.append(style, wrapper);\n  }\n  navigate(e) {\n    this.dispatchEvent(new CustomEvent('submit', {\n      detail: e.currentTarget.dataset.href\n    }));\n  }\n  set data(value) {\n    this.wrapper.innerHTML = value.map(element => {\n      return `<custom-button style=\"flex-shrink:0\" title=\"${element.title}\" data-index=\"${element.id}\"></custom-button>`\n    }).join('');\n    this.wrapper.querySelectorAll('custom-button').forEach(element => {\n      element.addEventListener('click', evt => {\n        this.click(evt);\n      });\n    })\n  }\n  click(evt) {\n    const index = parseInt(evt.currentTarget.dataset.index);\n    this.selected = index;\n    this.dispatchEvent(new CustomEvent('submit', {\n      detail: index\n    }));\n  }\n  set selected(value) {\n    this.wrapper.querySelectorAll('custom-button').forEach(element => {\n      if (element.dataset.index == value) {\n        element.setAttribute('selected', 'true');\n      }else{\n        element.setAttribute('selected', 'false');\n      }\n    })\n  }\n  connectedCallback() {\n   \n    this.selected = 0;\n  }\n  static get observedAttributes() {\n    return ['title'];\n  }\n  attributeChangedCallback(name, oldValue, newValue) {\n  }\n}\ncustomElements.define('custom-buttons', CustomButtons);\n/*\n<!--\n<script type=\"module\" src=\"./components/custom-buttons.js\"></script>\n<custom-buttons></custom-buttons>\ncustomElements.whenDefined('custom-buttons').then(() => {\n  customButtons.data = [\n      {\n        \"title\": \"TikTok\",\n        \"id\": 0\n      },\n      {\n        \"title\": \"已收藏\",\n        \"id\": 1\n      },\n      {\n        \"title\": \"抖音\",\n        \"id\": 2\n      },\n      {\n        \"title\": \"快手\",\n        \"id\": 3\n      },\n      {\n        \"title\": \"头条\",\n        \"id\": 4\n      },\n      {\n        \"title\": \"Twitter\",\n        \"id\": 5\n      },\n      {\n        \"title\": \"B站\",\n        \"id\": 6\n      },\n      {\n        \"title\": \"YouTue\",\n        \"id\": 7\n      },\n      {\n        \"title\": \"已删除\",\n        \"id\": 8\n      },\n      {\n        \"title\": \"其他\",\n        \"id\": 9\n      }\n    ]\n})\n-->\n*/</script><script>class CustomDialog extends HTMLElement {\n\n  constructor() {\n    super();\n    this.attachShadow({\n      mode: 'open'\n    });\n    const wrapper = document.createElement(\"div\");\n    wrapper.setAttribute(\"class\", \"wrapper\");\n    const style = document.createElement('style');\n    style.textContent = `.wrapper {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  -webkit-box-align: center;\n  align-items: center;\n  -webkit-box-pack: center;\n  justify-content: center;\n  z-index: 4;\n  margin: 0 40px;\n  padding: 0 env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);\n}\n\n.dialog {\n  position: relative;\n  z-index: 2;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  flex-direction: column;\n  max-height: 100%;\n  box-sizing: border-box;\n  padding: 16px;\n  margin: 0 auto;\n  overflow-x: hidden;\n  overflow-y: auto;\n  font-size: 13px;\n  color: #0f0f0f;\n  border: none;\n  min-width: 250px;\n  max-width: 356px;\n  box-shadow: 0 0 24px 12px rgba(0, 0, 0, 0.25);\n  border-radius: 12px;\n  background-color: #fff;\n}\n\n.dialog-header {\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  flex-direction: column;\n  flex-shrink: 0;\n}\n\n.h2 {\n  margin: 0 0 3px;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  max-height: 2.5em;\n  -webkit-line-clamp: 2;\n  overflow: hidden;\n  line-height: 1.25;\n  text-overflow: ellipsis;\n  font-weight: normal;\n  font-size: 18px;\n}\n\n.dialog-body {\n  overflow-y: auto;\n  overflow-x: hidden;\n  max-height: 100vh;\n  white-space: pre-wrap;\n}\n\n.dialog-buttons {\n  display: flex;\n  -webkit-box-align: center;\n  align-items: center;\n  -webkit-box-pack: end;\n  justify-content: flex-end;\n  margin-top: 12px;\n}\n\n.button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0 16px;\n  height: 36px;\n  font-size: 14px;\n  line-height: 36px;\n  border-radius: 18px;\n  color: #0f0f0f;\n}\n\n.disabled {\n  color: #909090\n}\n\n.overlay {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 1;\n  cursor: pointer;\n  background-color: rgba(0, 0, 0, 0.3);\n}`;\n    this.wrapper = wrapper;\n    this.shadowRoot.append(style, wrapper);\n  }\n  navigate(e) {\n    this.dispatchEvent(new CustomEvent('submit', {\n      detail: e.currentTarget.dataset.href\n    }));\n  }\n  _close(evt) {\n    evt.stopPropagation();\n    this.style.display = \"none\";\n    this.dispatchEvent(new CustomEvent('submit', {\n      detail: 1\n    }));\n  }\n  _submit(evt) {\n    evt.stopPropagation();\n    this.style.display = \"none\";\n    this.dispatchEvent(new CustomEvent('submit', {\n      detail: 2\n    }));\n  }\n  connectedCallback() {\n    this.wrapper.innerHTML = `<div class=\"dialog\">\n  <div class=\"dialog-header\">\n    <h2 bind=\"_title\" class=\"h2\">${this.getAttribute(\"title\")}</h2>\n  </div>\n  <div bind=\"_message\" class=\"dialog-body\">${this.getAttribute(\"message\")}</div>\n  <div class=\"dialog-buttons\">\n    <div bind=\"\" class=\"button\" @click=\"_close\">\n      取消\n    </div>\n    <div bind=\"\" class=\"button disabled\" @click=\"_submit\">\n      确定\n    </div>\n  </div>\n</div>\n<div bind=\"\" class=\"overlay\" @click=\"_close\">\n</div>`;\n    this.wrapper.querySelectorAll('[bind]').forEach(element => {\n      if (element.getAttribute('bind')) {\n        this[element.getAttribute('bind')] = element;\n      }\n      [...element.attributes].filter(attr => attr.nodeName.startsWith('@')).forEach(attr => {\n        if (!attr.value) return;\n        element.addEventListener(attr.nodeName.slice(1), evt => {\n          this[attr.value](evt);\n        });\n      });\n    })\n  }\n  static get observedAttributes() {\n    return ['title'];\n  }\n  attributeChangedCallback(name, oldValue, newValue) {\n  }\n  set title(name) {\n    this._title.textContent = name;\n  }\n  set message(value) {\n    this._message.textContent = value;\n  }\n}\ncustomElements.define('custom-dialog', CustomDialog);\n/*\n<!--\n<script type=\"module\" src=\"./components/custom-dialog.js\"></script>\n<custom-dialog></custom-dialog>\ncustomElements.whenDefined('custom-dialog').then(() => {\n  customDialog.data = []\n})\n-->\n*/ </script><script>class CustomToast extends HTMLElement {\n    static get observedAttributes() {\n        return ['message'];\n    }\n    // Fires when an instance of the element is created or updated\n    constructor() {\n        super();\n        this.root = this.attachShadow({\n            mode: 'open'\n        });\n        const style = document.createElement('style');\n        style.textContent = CustomToast.getStyle();\n        this.root.appendChild(style);\n        const c3Toast = document.createElement('DIV');\n        c3Toast.setAttribute('class', 'c3-toast');\n\n        const notificationActionRenderer = document.createElement('DIV');\n        notificationActionRenderer.setAttribute('class', 'notification-action-renderer');\n        const notificationActionResponseText = document.createElement('DIV');\n        notificationActionResponseText.setAttribute('class', 'notification-action-response-text');\n        notificationActionRenderer.appendChild(notificationActionResponseText);\n        c3Toast.appendChild(notificationActionRenderer);\n        this.root.appendChild(c3Toast);\n\n        this.c3Toast = c3Toast;\n        this.notificationActionResponseText = notificationActionResponseText;\n        this.messages = [];\n        this.timer = 0;\n    }\n\n    // Fires when an instance was inserted into the document\n    connectedCallback() {}\n\n    // Fires when an instance was removed from the document\n    disconnectedCallback() {}\n\n    showMessage() {\n        if (this.messages.length && !this.showing) {\n            const message = this.messages.shift();\n            this.notificationActionResponseText.textContent = message;\n            this.c3Toast.setAttribute('dir', 'in');\n            this.showing = true;\n            if (this.timer) {\n                clearTimeout(this.timer);\n            }\n            this.timer = setTimeout(() => {\n                this.c3Toast.setAttribute('dir', 'out');\n                setTimeout(() => {\n                    this.showing = false;\n                    this.showMessage();\n                }, 195);\n            }, 3000);\n        }\n    }\n    // Fires when an attribute was added, removed, or updated\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (attrName === 'message') {\n            this.messages.push(newVal);\n            this.showMessage();\n        }\n    }\n\n    // Fires when an element is moved to a new document\n    adoptedCallback() {}\n    static getTemplate(value) {\n        return `\n        ${CustomToast.getStyle()}\n        <div>\n            ${value}\n        </div>\n        `;\n    }\n    static getStyle() {\n        return `\n        .c3-toast[dir=\"in\"] {\n            transition: margin 225ms cubic-bezier(0.0, 0.0, 0.2, 1);\n            margin-top: 0;\n        }\n        \n        .c3-toast[dir=\"out\"] {\n            transition: margin 195ms cubic-bezier(0.4, 0.0, 1, 1);\n        }\n        \n        .c3-toast {\n            display: block;\n            position: fixed;\n            z-index: 999;\n            left: 0;\n            right: 0;\n            top: 0;\n            box-sizing: border-box;\n            padding: 14px 24px;\n            font-size: 1.4rem;\n            color: #ffffff;\n            background: hsl(0, 0%, 20%);\n            will-change: transform;\n            margin-top: -100%;\n        }\n        \n        .notification-action-renderer {\n            display: flex;\n            align-items: center;\n        }\n        \n        .notification-action-response-text {\n            flex-grow: 1;\n            padding-right: 1rem;\n            font-size:14px;\n        }\n        \n        `;\n    }\n}\ncustomElements.define('custom-toast', CustomToast);\n/*\n<!--\n<custom-toast id=\"toast\"></custom-toast>\n<script src=\"toast.js\"></script>\n document.getElementById('toast').setAttribute('message','');-\n-->\n*/</script><script>class CustomDialogSpinner extends HTMLElement {\n\n  constructor() {\n    super();\n    this.attachShadow({\n      mode: 'open'\n    });\n    const wrapper = document.createElement(\"div\");\n    wrapper.setAttribute(\"class\", \"wrapper\");\n    const style = document.createElement('style');\n    style.textContent = `.wrapper{position:fixed;top:0;left:0;right:0;bottom:0;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;z-index:4;margin:0 40px;padding:0 env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);}.dialog{position:relative;z-index:2;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;max-height:100%;box-sizing:border-box;padding:16px;margin:0 auto;overflow-x:hidden;overflow-y:auto;font-size:13px;color:#0f0f0f;border:none;min-width:250px;max-width:356px;box-shadow:0 0 24px 12px rgba(0,0,0,0.25);border-radius:12px;background-color:#fff;}.dialog-header{display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;flex-shrink:0;}.h2{margin:0 0 3px;display:-webkit-box;-webkit-box-orient:vertical;max-height:2.5em;-webkit-line-clamp:2;overflow:hidden;line-height:1.25;text-overflow:ellipsis;font-weight:normal;font-size:18px;}\n    .dialog-body{\n   display: flex;\n      align-items: center;\n      justify-content: center;\n    \n     overflow-y:auto;overflow-x:hidden;max-height:100vh;white-space:pre-wrap;\n    \n    flex-direction:column;\n    }.dialog-buttons{display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:end;justify-content:flex-end;margin-top:12px;}.button{display:flex;align-items:center;justify-content:center;padding:0 16px;height:36px;font-size:14px;line-height:36px;border-radius:18px;color:#0f0f0f;}.disabled{color:#909090}.overlay{position:fixed;top:0;bottom:0;left:0;right:0;z-index:1;cursor:pointer;background-color:rgba(0,0,0,0.3);}\n    @keyframes spinner {\n      0% {\n          -webkit-transform: rotate(0deg);\n          transform: rotate(0deg)\n      }\n  \n      100% {\n          -webkit-transform: rotate(1turn);\n          transform: rotate(1turn)\n      }\n  }\n  \n  .spinner {\n      display: block;\n      box-sizing: border-box;\n      margin: 12px auto;\n      width: 32px;\n      height: 32px;\n      border-radius: 50%;\n      border: 2px solid #eee;\n      border-top-color: #666;\n      -webkit-animation: spinner .8s linear infinite;\n      animation: spinner .8s linear infinite\n  }`;\n    this.wrapper = wrapper;\n    this.shadowRoot.append(style, wrapper);\n  }\n  navigate(e) {\n    this.dispatchEvent(new CustomEvent('submit', {\n      detail: e.currentTarget.dataset.href\n    }));\n  }\n  \n \n  connectedCallback() {\n    this.wrapper.insertAdjacentHTML('afterbegin',`<div class=\"dialog\">\n    <div class=\"dialog-body\">\n    \n    <div class=\"spinner\">\n      </div>\n   <div> 加载中...</div></div>\n  </div>\n<div class=\"overlay\">\n</div>`);\n    this.wrapper.querySelectorAll('[bind]').forEach(element => {\n      if (element.getAttribute('bind')) {\n        this[element.getAttribute('bind')] = element;\n      }\n      [...element.attributes].filter(attr => attr.nodeName.startsWith('@')).forEach(attr => {\n        if (!attr.value) return;\n        element.addEventListener(attr.nodeName.slice(1), evt => {\n          this[attr.value](evt);\n        });\n      });\n    })\n  }\n    static get observedAttributes() {\n    return ['title'];\n  }\n  attributeChangedCallback(name, oldValue, newValue) {\n  }\n}\ncustomElements.define('custom-dialog-spinner', CustomDialogSpinner);\n/*\n<!--\n<script type=\"module\" src=\"./components/custom-dialog-spinner.js\"></script>\n<custom-dialog-spinner></custom-dialog-spinner>\ncustomElements.whenDefined('custom-dialog-spinner').then(() => {\n  customDialogSpinner.data = []\n})\n-->\n*/</script><script>document.querySelectorAll('[bind]').forEach(element => {\r\n    if (element.getAttribute('bind')) {\r\n        window[element.getAttribute('bind')] = element;\r\n    }\r\n    [...element.attributes].filter(attr => attr.nodeName.startsWith('@')).forEach(attr => {\r\n        if (!attr.value) return;\r\n        element.addEventListener(attr.nodeName.slice(1), evt => {\r\n            window[attr.value](evt);\r\n        });\r\n    });\r\n})\r\n\r\n\r\ncustomElements.whenDefined('custom-bottom-bar').then(() => {\r\n    customBottomBar.data = [{\r\n        path: `<path d=\"M12 3c0 0-6.186 5.34-9.643 8.232-0.203 0.184-0.357 0.452-0.357 0.768 0 0.553 0.447 1 1 1h2v7c0 0.553 0.447 1 1 1h3c0.553 0 1-0.448 1-1v-4h4v4c0 0.552 0.447 1 1 1h3c0.553 0 1-0.447 1-1v-7h2c0.553 0 1-0.447 1-1 0-0.316-0.154-0.584-0.383-0.768-3.433-2.892-9.617-8.232-9.617-8.232z\"></path>`,\r\n        title: '首页',\r\n        href: \"home\"\r\n    }, {\r\n        path: `<path d=\"M9.984 16.5l6-4.5-6-4.5v9zM12 2.016q4.125 0 7.055 2.93t2.93 7.055-2.93 7.055-7.055 2.93-7.055-2.93-2.93-7.055 2.93-7.055 7.055-2.93z\"></path>`,\r\n        title: '视频',\r\n        href: \"videos\"\r\n    }, {\r\n        path: `<path d=\"M17.672 6.328l2.344-2.344v7.031h-7.031l3.234-3.234q-1.781-1.781-4.219-1.781-2.484 0-4.242 1.758t-1.758 4.242 1.758 4.242 4.242 1.758q1.734 0 3.398-1.172t2.273-2.813h2.063q-0.656 2.625-2.813 4.313t-4.922 1.688q-3.281 0-5.625-2.344t-2.344-5.672 2.344-5.672 5.625-2.344q1.406 0 3.070 0.68t2.602 1.664z\"></path>    `,\r\n        title: '刷新',\r\n        href: \"refresh\"\r\n    }]\r\n})\r\n\r\ncustomElements.whenDefined('custom-dialog-actions').then(() => {\r\n    customDialogActions.data = [\r\n        {\r\n            \"title\": \"分享\",\r\n            \"id\": 0\r\n        },\r\n        {\r\n            \"title\": \"删除\",\r\n            \"id\": 1\r\n        },\r\n        {\r\n            \"title\": \"播放\",\r\n            \"id\": 2\r\n        }\r\n    ]\r\n  })\r\n\r\n\r\nfunction showDrawer(evt) {\r\n    evt.stopPropagation();\r\n    customDrawer.setAttribute('expand', 'true');\r\n}\r\n\r\nasync function navigate(evt) {\r\n    switch (evt.detail) {\r\n        case \"home\":\r\n            window.location = '/';\r\n            break;\r\n        case \"refresh\":\r\n            if (typeof NativeAndroid !== 'undefined') {\r\n                NativeAndroid.refreshThumbnails();\r\n            }\r\n            location.reload();\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n}\r\n//////////////////////////////////////\r\nasync function loadData(t) {\r\n\r\n    const response = await fetch(`${baseUri}/api/videos`);\r\n    if (response.status > 399 || response.status < 200) {\r\n        throw new Error(`${response.status}: ${response.statusText}`)\r\n    }\r\n    return await response.json();\r\n\r\n}\r\n\r\nasync function render() {\r\n    try {\r\n        const data = await loadData();\r\n        customElements.whenDefined('custom-videos').then(() => {\r\n            customVideos.data = data.sort((x, y) => {\r\n                return y.update_at - x.update_at\r\n            });\r\n        })\r\n        customVideos.host = baseUri;\r\n    } catch (error) {\r\n        console.log(error);\r\n        return null;\r\n    }\r\n}\r\nfunction onVideosHandler(evt) {\r\n    customDialogActions.removeAttribute('style');\r\n    customDialogActions.dataset.id = evt.detail;\r\n}\r\n\r\n\r\nasync function onActionsHanlder(evt) {\r\n    const id = evt.currentTarget.dataset.id;\r\n    customDialogActions.setAttribute('style', 'display:none');\r\n    switch (evt.detail) {\r\n        case \"0\":\r\n            console.log(id)\r\n            if (typeof NativeAndroid !== 'undefined') {\r\n                NativeAndroid.share(id)\r\n            }\r\n            break;\r\n        case \"1\":\r\n            break;\r\n        case \"2\":\r\n            window.open(`/video?q=${encodeURIComponent(`/api/videos?action=2&q=${id}`)}`)\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n}\r\n//////////////////////////////////////\r\nlet baseUri = window.location.host === '127.0.0.1:5500' ? 'http://192.168.0.109:10808' : '';\r\n\r\n\r\nrender();\r\n</script></body>\r\n\r\n</html>"