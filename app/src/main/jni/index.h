#define INDEX "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>视频列表</title>\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n\r\n<style>\r\nbutton {\r\n    padding: 0;\r\n    border: none;\r\n    outline: none;\r\n    font: inherit;\r\n    text-transform: inherit;\r\n    color: inherit;\r\n    background: transparent\r\n}\r\n\r\nhtml {\r\n    color: #0f0f0f;\r\n    background-color: #fff;\r\n    font-size: 10px;\r\n    font-family: Roboto, Arial, sans-serif\r\n}\r\n\r\nbody {\r\n    margin: 0;\r\n    padding: 0;\r\n    padding: 0 env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);\r\n    font-size: 1.2rem;\r\n    overflow-x: hidden\r\n}\r\n\r\nheader {\r\n    height: 48px\r\n}\r\n\r\n* {\r\n    -ms-flex: 0 1 auto\r\n}\r\n\r\n\r\nhtml {\r\n    word-wrap: break-word;\r\n    color: #0f0f0f;\r\n    background-color: #fff;\r\n    -webkit-text-size-adjust: 100%\r\n}\r\n\r\ninput,\r\ntextarea {\r\n    background-color: transparent;\r\n    padding-bottom: 4px;\r\n    outline: none;\r\n    box-sizing: border-box;\r\n    border: none;\r\n    border-radius: 0;\r\n    margin-bottom: 1px;\r\n    font: inherit;\r\n    color: #0f0f0f\r\n}\r\n\r\ninput::-webkit-input-placeholder,\r\ntextarea::-webkit-input-placeholder {\r\n    color: #606060;\r\n    opacity: 1\r\n}\r\n\r\ninput::placeholder,\r\ntextarea::placeholder {\r\n    color: #606060;\r\n    opacity: 1\r\n}\r\n\r\ntextarea {\r\n    -webkit-appearance: none;\r\n    appearance: none;\r\n    min-height: 8.4rem;\r\n    width: 100%;\r\n    border: 1px solid rgba(0, 0, 0, 0.1);\r\n    padding: 8px\r\n}\r\n\r\ninput {\r\n    border-bottom: 1px solid #737373;\r\n    text-overflow: ellipsis\r\n}\r\n\r\ninput:focus {\r\n    margin-bottom: 0;\r\n    border-bottom-width: 2px;\r\n    border-bottom-color: #0f0f0f\r\n}\r\n\r\nform {\r\n    margin: 0\r\n}\r\n\r\na {\r\n    color: currentColor;\r\n    text-decoration: none\r\n}\r\n\r\nstrong,\r\nb {\r\n    font-weight: 500\r\n}\r\n\r\nh1,\r\nh2,\r\nh3,\r\nh4 {\r\n    margin: 0 0 3px\r\n}\r\n\r\nh2 {\r\n    font-size: 1.8rem\r\n}\r\n\r\nh3 {\r\n    font-size: 1.4rem\r\n}\r\n\r\nh4 {\r\n    font-size: 1.3rem\r\n}\r\n\r\nimg {\r\n    min-width: 1px;\r\n    min-height: 1px;\r\n    -webkit-filter: none;\r\n    filter: none\r\n}\r\n\r\n:focus {\r\n    outline: none\r\n}\r\n\r\np {\r\n    margin: 8px 0;\r\n    line-height: 1.25\r\n}</style></head>\r\n\r\n<body>\r\n    <style>\r\n        body {\r\n            display: flex;\r\n            flex-direction: column;\r\n        }\r\n    </style>\r\n    <custom-drawer bind=\"customDrawer\" @submit=\"onCustomDrawer\"></custom-drawer>\r\n    <custom-header title=\"首页\" bind=\"customHeader\" @submit=\"showDrawer\"></custom-header>\r\n    <div style=\"height: 56px;\"></div>\r\n    <custom-buttons bind=\"customButtons\" @submit=\"onButtonsHandler\"></custom-buttons>\r\n    <custom-items bind=\"customItems\" @submit=\"onItemsHandler\"></custom-items>\r\n    <div bind=\"bottom\" style=\"height: 49px;\"></div>\r\n    <custom-bottom-bar bind=\"customBottomBar\" @submit=\"navigate\"></custom-bottom-bar>\r\n    <custom-dialog-actions bind=\"customDialogActions\" @submit=\"onActionsHanlder\" style=\"display:none;\">\r\n    </custom-dialog-actions>\r\n    <custom-dialog bind=\"customDialog\" @submit=\"onDialogHandler\" style=\"display:none;\"></custom-dialog>\r\n    <custom-toast bind=\"customToast\"></custom-toast>\r\n    <custom-dialog-spinner bind=\"customDialogSpinner\" style=\"display:none;\"></custom-dialog-spinner>\r\n\r\n    <style>\r\n        .dialog-mask {\r\n            position: fixed;\r\n            z-index: 1001;\r\n            right: 0;\r\n            bottom: -200px;\r\n            top: 0;\r\n            left: 0;\r\n            /* -webkit-transition: opacity .25s; */\r\n            opacity: 0;\r\n            visibility: hidden;\r\n        }\r\n\r\n        .dialog-show .dialog-mask {\r\n            background-color: #000;\r\n            opacity: .4;\r\n            visibility: inherit;\r\n        }\r\n\r\n        .dialog-wrapper {\r\n            position: fixed;\r\n            right: 0;\r\n            bottom: 0;\r\n            top: 0;\r\n            left: 0;\r\n            z-index: 1002;\r\n            text-align: center;\r\n            vertical-align: middle;\r\n            visibility: hidden;\r\n            white-space: nowrap;\r\n            max-height: 100%;\r\n            max-width: 100%;\r\n            overflow: auto;\r\n            transform: translateZ(0);\r\n            -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\r\n        }\r\n\r\n        .dialog-show .dialog-wrapper {\r\n            opacity: 1;\r\n            visibility: inherit;\r\n        }\r\n\r\n        .dialog-wrapper::after {\r\n            content: '';\r\n            display: inline-block;\r\n            height: 100%;\r\n            vertical-align: middle;\r\n        }\r\n\r\n        .dialog-container {\r\n            border-radius: 8px;\r\n            position: relative;\r\n            display: inline-block;\r\n            z-index: 1060;\r\n            background-color: #fff;\r\n            opacity: 0;\r\n            text-align: left;\r\n            vertical-align: middle;\r\n            white-space: normal;\r\n            overflow: hidden;\r\n            transform: translateZ(0);\r\n            box-shadow: 0 5px 26px 0 rgba(0, 0, 0, .22), 0 20px 28px 0 rgba(0, 0, 0, .3);\r\n        }\r\n\r\n        .dialog-show .dialog-container {\r\n            opacity: 1;\r\n            visibility: inherit;\r\n        }\r\n\r\n        .dialog-container-wrapper {\r\n            max-width: 300px;\r\n            -webkit-user-select: none;\r\n        }\r\n\r\n        .dialog-content {\r\n            padding: 24px;\r\n            font-size: 16px;\r\n            overflow-wrap: break-word;\r\n        }\r\n\r\n        .dialog-footer {\r\n            display: flex;\r\n            justify-content: flex-end;\r\n            padding: 0 0 8px 0;\r\n        }\r\n\r\n        .dialog-button {\r\n            margin-bottom: -1px;\r\n            text-overflow: ellipsis;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            flex: 0 0 auto;\r\n            margin-right: 8px;\r\n            min-width: 48px;\r\n            padding: 0 8px;\r\n            line-height: 36px !important;\r\n            text-align: center;\r\n            font-family: Roboto-Medium, HelveticaNeue-Medium, HelveticaNeue, sans-serif-medium, Arial, sans-serif !important;\r\n        }\r\n    </style>\r\n    <div class=\"dialog\">\r\n        <div class=\"dialog-mask\">\r\n        </div>\r\n        <div class=\"dialog-wrapper\">\r\n            <div class=\"dialog-container\">\r\n                <div class=\"dialog-container-wrapper\">\r\n                    <div class=\"dialog-content\">\r\n                        <div class=\"spinner\">\r\n                        </div>\r\n                        <span>正在上传文件...\r\n                        </span>\r\n                    </div>\r\n                    <div class=\"dialog-footer\" style=\"display: none;\">\r\n                        <div class=\"dialog-button\">\r\n                            确认\r\n                        </div>\r\n                        <div class=\"dialog-button\" style=\"color: #db4437;\">\r\n                            删除\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <script>\r\n\r\n        var dropZone = document.querySelector('body');\r\n        dropZone.addEventListener('dragover', function (e) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            e.dataTransfer.dropEffect = 'copy'\r\n        });\r\n        dropZone.addEventListener('drop', function (e) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            uploadFiles(e.dataTransfer.files)\r\n        });\r\n\r\n        async function uploadFiles(files) {\r\n            document.querySelector('.dialog').className = 'dialog dialog-show';\r\n            const dialogContext = document.querySelector('.dialog-content span');\r\n            const length = files.length;\r\n            let i = 1;\r\n            for (let file of files) {\r\n                dialogContext.textContent = `正在上传 (${i++}/${length}) ${file.name} ...`;\r\n                const formData = new FormData;\r\n                formData.append('file', file, file.name);\r\n                try {\r\n                    await fetch(`${baseUri}/post`, {\r\n                        method: \"POST\",\r\n                        body: formData\r\n                    }).then(res => console.log(res))\r\n                } catch (e) {\r\n                }\r\n            }\r\n            document.querySelector('.dialog').className = 'dialog'\r\n        }\r\n    </script>\r\n    <script>\r\n\r\n        document.querySelectorAll('[bind]').forEach(element => {\r\n            if (element.getAttribute('bind')) {\r\n                window[element.getAttribute('bind')] = element;\r\n            }\r\n            [...element.attributes].filter(attr => attr.nodeName.startsWith('@')).forEach(attr => {\r\n                if (!attr.value) return;\r\n                element.addEventListener(attr.nodeName.slice(1), evt => {\r\n                    window[attr.value](evt);\r\n                });\r\n            });\r\n        })\r\n        \r\nfunction showDrawer(evt) {\r\n  evt.stopPropagation();\r\n  customDrawer.setAttribute('expand', 'true');\r\n}\r\n\r\n    </script>\r\n    \r\n\r\n<script>class CustomHeader extends HTMLElement {\n\n  constructor() {\n    super();\n    this.attachShadow({\n      mode: 'open'\n    });\n    const style = document.createElement('style');\n    style.textContent = `.header {\n  color: black;\n  min-width: 320px;\n  transition: box-shadow 250ms;\n  top: 0;\n  width: 100%;\n  display: block;\n  font: 13px/27px Roboto, Arial, sans-serif;\n  z-index: 986;\n  position: fixed;\n  left: 0;\n  right: 0;\n  background-color: rgba(255, 255, 255, 1);\n}\n\n.wrapper {\n  box-sizing: border-box;\n  position: relative;\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  transition: background-color .4s;\n  padding: 4px;\n  padding-left: 8px;\n  min-width: 0;\n}\n\n.left {\n  height: 48px;\n  vertical-align: middle;\n  white-space: nowrap;\n  -webkit-box-align: center;\n  align-items: center;\n  display: flex;\n  -webkit-user-select: none;\n  box-sizing: border-box;\n  padding-right: 14px;\n  flex: 1 1 auto;\n  overflow: hidden;\n}\n\n.middle {\n  height: 48px;\n  white-space: nowrap;\n  align-items: center;\n  display: flex;\n  -webkit-user-select: none;\n  justify-content: flex-end;\n  flex: 0 0 auto;\n}\n\n.svg {\n  fill: currentColor;\n  opacity: 1;\n  border-radius: 50%;\n  padding: 8px;\n  margin: 3px;\n  color: unset;\n  margin-left: 1px;\n  margin-right: 1px;\n}\n\n.title {\n  display: inline-block;\n  font-size: 22px;\n  line-height: 24px;\n  position: relative;\n  vertical-align: middle;\n  color: #5f6368;\n  opacity: 1;\n  padding-left: 0;\n}\n\n.hamburger-menu {\n  border-radius: 50%;\n  display: inline-block;\n  padding: 12px;\n  overflow: hidden;\n  vertical-align: middle;\n  cursor: pointer;\n  height: 24px;\n  width: 24px;\n  -webkit-user-select: none;\n  flex: 0 0 auto;\n  margin: 0 4px 0 0;\n}`;\n    this.shadowRoot.append(style);\n  }\n  get showing() {\n    return this.isShowing || false;\n  }\n  set showing(val) {\n    if (val) {\n      this.header.style = 'box-shadow:0px 4px 5px 0px rgb(0 0 0 / 14%), 0px 1px 10px 0px rgb(0 0 0 / 12%), 0px 2px 4px -1px rgb(0 0 0 / 20%)';\n    } else {\n      this.header.style = '';\n    }\n    this.isShowing = val;\n  }\n  showDrawer() {\n    this.dispatchEvent(new CustomEvent('submit'));\n  }\n\n  connectedCallback() {\n    const header = document.createElement('div');\n    header.setAttribute(\"bind\", \"header\");\n    header.setAttribute(\"class\", \"header\");\n    if (this.showing) {\n      header.setAttribute('style', 'box-shadow:0px 4px 5px 0px rgb(0 0 0 / 14%), 0px 1px 10px 0px rgb(0 0 0 / 12%), 0px 2px 4px -1px rgb(0 0 0 / 20%)');\n    }\n    this.shadowRoot.appendChild(header);\n    const wrapper = document.createElement('div');\n    wrapper.setAttribute(\"class\", \"wrapper\");\n    header.appendChild(wrapper);\n    const left = document.createElement('div');\n    left.setAttribute(\"class\", \"left\");\n    wrapper.appendChild(left);\n    const hamburgerMenu = document.createElement('div');\n    hamburgerMenu.setAttribute(\"class\", \"hamburger-menu\");\n   \n    left.appendChild(hamburgerMenu);\n    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svg.setAttribute(\"focusable\", \"false\");\n    svg.setAttribute(\"viewBox\", \"0 0 24 24\");\n    hamburgerMenu.appendChild(svg);\n    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    path.setAttribute(\"d\", \"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\");\n    svg.appendChild(path);\n    const title = document.createElement('div');\n    title.setAttribute(\"class\", \"title\");\n    left.appendChild(title);\n    title.textContent = `${this.getAttribute('title')}`;\n    const middle = document.createElement('div');\n    middle.setAttribute(\"class\", \"middle\");\n    wrapper.appendChild(middle);\n    const svg1 = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svg1.setAttribute(\"class\", \"svg\");\n    svg1.setAttribute(\"focusable\", \"false\");\n    svg1.setAttribute(\"height\", \"24px\");\n    svg1.setAttribute(\"viewBox\", \"0 0 24 24\");\n    svg1.setAttribute(\"width\", \"24px\");\n    svg1.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\n    middle.appendChild(svg1);\n    const path2 = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    path2.setAttribute(\"d\", \"M20.49,19l-5.73-5.73C15.53,12.2,16,10.91,16,9.5C16,5.91,13.09,3,9.5,3S3,5.91,3,9.5C3,13.09,5.91,16,9.5,16 c1.41,0,2.7-0.47,3.77-1.24L19,20.49L20.49,19z M5,9.5C5,7.01,7.01,5,9.5,5S14,7.01,14,9.5S11.99,14,9.5,14S5,11.99,5,9.5z\");\n    svg1.appendChild(path2);\n    const path3 = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    path3.setAttribute(\"d\", \"M0,0h24v24H0V0z\");\n    path3.setAttribute(\"fill\", \"none\");\n    svg1.appendChild(path3);\n\n    hamburgerMenu.addEventListener('click',this.showDrawer.bind(this))\n    document.addEventListener(\"scroll\", () => {\n      this.showing = window.scrollY > 56;\n    });\n  }\n}\ncustomElements.define('custom-header', CustomHeader);\n/*\n<!--\n<script type=\"module\" src=\"./components/custom-header.js\"></script>\n<custom-header></custom-header>\ncustomElements.whenDefined('custom-header').then(() => {\n  customHeader.data = []\n})\n-->\n*/</script><script>class CustomDrawer extends HTMLElement {\n\n  constructor() {\n    super();\n    this.attachShadow({\n      mode: 'open'\n    });\n    const wrapper = document.createElement(\"div\");\n    wrapper.setAttribute(\"class\", \"wrapper\");\n    const style = document.createElement('style');\n    style.textContent = `.name {\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n    \n    .main {\n      display: flex;\n      flex: 1 1 auto;\n      flex-direction: column;\n    }\n    \n    .overlay {\n      position: fixed;\n      right: 0;\n      top: 0;\n      left: 0;\n      bottom: 0;\n      z-index: 991;\n      cursor: pointer;\n    }\n    \n    .top {\n      position: relative;\n      top: 2px;\n      -webkit-user-select: none;\n      min-height: 48px;\n      display: table-cell;\n      height: 48px;\n      vertical-align: middle;\n      padding-top: 4px;\n      padding-bottom: 4px;\n      padding-left: 16px;\n    }\n    \n    .item {\n      text-decoration: none;\n      letter-spacing: .01785714em;\n      font-size: 14px;\n      font-weight: 500;\n      line-height: 20px;\n      height: 48px;\n      display: flex;\n      -webkit-box-align: center;\n      align-items: center;\n      padding-left: 24px;\n      padding-right: 12px;\n      margin-right: 8px;\n      border-radius: 0 50px 50px 0;\n      cursor: pointer;\n      color: inherit;\n    }\n    \n    .wrapper {\n      background-color: #fff;\n      bottom: 0;\n      color: #000;\n      overflow-x: hidden;\n      position: fixed;\n      top: 0;\n      bottom: 0;\n      z-index: 992;\n      will-change: visibility;\n      display: flex;\n      flex-direction: column;\n    }\n    \n    .divider {\n      border-bottom: 1px solid #e8eaed;\n      margin: 8px 8px 8px 0;\n    }\n    `;\n    wrapper.style = 'transition:transform .25s cubic-bezier(0.4,0.0,0.2,1),visibility 0s linear .25s;transform:translateX(-264px)'\n    const top = document.createElement('div');\n    top.setAttribute(\"class\", \"top\");\n    const main = document.createElement('div');\n    main.setAttribute(\"class\", \"main\");\n    wrapper.append(top, main);\n    this.wrapper = wrapper;\n    this.main = main;\n    const overlay = document.createElement('div');\n    overlay.setAttribute(\"class\", \"overlay\");\n    overlay.style.display = 'none';\n    this.overlay = overlay;\n    this.shadowRoot.append(style, wrapper, overlay);\n    overlay.addEventListener('click', () => {\n      this.wrapper.style = 'transition:transform .25s cubic-bezier(0.4,0.0,0.2,1),visibility 0s linear .25s;transform:translateX(-264px)'\n      this.overlay.style.display = 'none';\n    })\n  }\n \n  set data(value) {\n    value.forEach(element => {\n      const item = document.createElement('div');\n      item.setAttribute(\"bind\", \"\");\n      item.setAttribute(\"class\", \"item\");\n \n      this.main.appendChild(item);\n      const div = document.createElement('div');\n      div.style.width = \"24px\";\n      div.style.height = \"24px\";\n      div.style.fill = \"currentColor\";\n      div.style.color = \"#333\";\n      div.style.display = \"flex\";\n      div.style.alignItems = \"center\";\n      div.style.justifyContent = \"center\";\n      div.style.marginRight = \"16px\";\n      const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n      svg.setAttribute(\"viewBox\", \"0 0 24 24\");\n      svg.style.width = \"24px\";\n      svg.style.height = \"24px\";\n      item.appendChild(div);\n      div.appendChild(svg);\n      svg.innerHTML = `${element.path}`;\n      const name = document.createElement('div');\n      name.setAttribute(\"class\", \"name\");\n      item.appendChild(name);\n      name.textContent = `${element.name}`;\n      item.addEventListener('click', evt => {\n        this.dispatchEvent(new CustomEvent('submit', {\n          detail:element.href\n        }));\n      })\n    });\n\n  }\n\n  connectedCallback() {\n\n  }\n  static get observedAttributes() {\n    return ['expand'];\n  }\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (name === \"expand\") {\n      this.wrapper.style = 'transform: translateX(0);visibility: visible;box-shadow: 0 0 16px rgba(0,0,0,.28);transition: transform .25s cubic-bezier(0.4,0.0,0.2,1),visibility 0s linear 0s;overflow-y: visible;width: 256px;';\n      this.overlay.style.display = 'block';\n    }\n  }\n}\ncustomElements.define('custom-drawer', CustomDrawer);\n/*\n<!--\n<script type=\"module\" src=\"./components/custom-drawer.js\"></script>\n<custom-drawer></custom-drawer>\ncustomElements.whenDefined('custom-drawer').then(() => {\n  customDrawer.data = []\n})\n-->\n*/</script><script>class CustomItems extends HTMLElement {\r\n\r\n  constructor() {\r\n    super();\r\n    this.host = \"https://www.tikwm.com\";\r\n    this.attachShadow({\r\n      mode: 'open'\r\n    });\r\n    const wrapper = document.createElement(\"div\");\r\n    wrapper.setAttribute(\"class\", \"wrapper\");\r\n    const style = document.createElement('style');\r\n    style.textContent = `.wrapper {\r\n        padding: 0 16px;\r\n      box-sizing:border-box;\r\n      }\r\n      \r\n      .item {\r\n        border-top: 1px solid #e8eaed;\r\n        display: block;\r\n        padding: 12px 0;\r\n        display: flex;\r\n      }\r\n      \r\n      .left {\r\n        flex-grow: 1;\r\n        overflow:hidden;\r\n      }\r\n      \r\n      .image {\r\n        flex-shrink:0;\r\n        border: none;\r\n        border-radius: 8px;\r\n        object-fit: cover;\r\n        align-self: end;\r\n        margin-left: 16px;\r\n        height: 92px;\r\n        width: 92px;\r\n      }\r\n      \r\n      .top {\r\n        -webkit-box-orient: horizontal;\r\n        flex-direction: row;\r\n        color: #5f6368;\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        letter-spacing: .01428571em;\r\n        font-family: Roboto, Arial, sans-serif;\r\n        font-weight: 400;\r\n        font-size: 12px;\r\n        line-height: 16px;\r\n      }\r\n      \r\n      .top-left {\r\n        font-weight: 500;\r\n      display:none;\r\n      }\r\n      \r\n      .top-left:after {\r\n        content: \"\\\\0000a0\\\\002022\\\\0000a0\";\r\n        padding-right: 8px;\r\n        padding-left: 6px;\r\n      }\r\n      \r\n      .top-right {\r\n        display: inline-flex;\r\n      }\r\n      \r\n      .bottom {\r\n        letter-spacing: .00625em;\r\n        font-family: \"Google Sans\", Roboto, Arial, sans-serif;\r\n        color: #202124;\r\n        font-size: 16px;\r\n        line-height: 24px;\r\n        font-weight: 500;\r\n        padding-top: 8px;\r\n        display: -webkit-box;\r\n          -webkit-box-orient: vertical;\r\n          max-height: 3.75em;\r\n          -webkit-line-clamp: 3;\r\n          overflow: hidden;\r\n          line-height: 1.25;\r\n          text-overflow: ellipsis;\r\n          font-weight: normal\r\n      }`;\r\n    this.wrapper = wrapper;\r\n    this.shadowRoot.append(style, wrapper);\r\n  }\r\n  navigate(e) {\r\n    this.dispatchEvent(new CustomEvent('submit', {\r\n      detail: e.currentTarget.dataset.index\r\n    }));\r\n  }\r\n  _copyTitle(e) {\r\n    \r\n    e.stopPropagation();\r\n    writeText(e.currentTarget.textContent.trim())\r\n  }\r\n  set data(value) {\r\n    if (value.length === 0) {\r\n      this.wrapper.innerHTML = '';\r\n      return;\r\n    }\r\n    const div = document.createElement('div');\r\n    div.innerHTML = value.map(element => {\r\n      let image;\r\n      if (!element.cover.startsWith(\"https://\") && !element.cover.startsWith(\"http://\")) {\r\n        image = `${this.host}/${element.cover}`\r\n      } else {\r\n        image = element.cover;\r\n      }\r\n\r\n      return `<div bind=\"\" class=\"item\" data-index=\"${element._id}\" @click=\"navigate\">\r\n        <div class=\"left\">\r\n          <div class=\"top\">\r\n            <div class=\"top-left\">\r\n      \r\n            </div>\r\n            <div class=\"top-right\">\r\n      ${timeAgo(element.update_at * 1000)}\r\n            </div>\r\n          </div>\r\n          <div class=\"bottom\" bind=\"\" @click=\"_copyTitle\">\r\n      ${element.title}\r\n          </div>\r\n        </div>\r\n        <img class=\"image\" src=\"${image}\">\r\n      </div>`\r\n    }).join('');\r\n    div.querySelectorAll('[bind]').forEach(element => {\r\n      if (element.getAttribute('bind')) {\r\n        this[element.getAttribute('bind')] = element;\r\n      }\r\n      [...element.attributes].filter(attr => attr.nodeName.startsWith('@')).forEach(attr => {\r\n        if (!attr.value) return;\r\n        element.addEventListener(attr.nodeName.slice(1), evt => {\r\n          this[attr.value](evt);\r\n        });\r\n      });\r\n    })\r\n    this.wrapper.appendChild(div);\r\n  }\r\n\r\n  connectedCallback() {\r\n  }\r\n}\r\ncustomElements.define('custom-items', CustomItems);\r\n/*\r\n<!--\r\n<script type=\"module\" src=\"./components/custom-items.js\"></script>\r\n<custom-items></custom-items>\r\ncustomElements.whenDefined('custom-items').then(() => {\r\n  customItems.data = []\r\n})\r\n-->\r\n*/\r\nfunction timeSpan(atime, btime) {\r\n  var milliseconds = +(btime || new Date()) - +atime;\r\n  var seconds = ~~(milliseconds / 1000);\r\n  var minutes = ~~(milliseconds / (1 * 60 * 1000));\r\n  var hours = ~~(milliseconds / (1 * 60 * 60 * 1000));\r\n  var days = ~~(milliseconds / (1 * 24 * 60 * 60 * 1000));\r\n  var years = ~~(days / 365.5);\r\n  return {\r\n    years,\r\n    days,\r\n    hours,\r\n    minutes,\r\n    seconds,\r\n    milliseconds\r\n  };\r\n}\r\n\r\nfunction timeAgo(time, locales = 'zh') {\r\n  const ts = timeSpan(time);\r\n  if (!i18n[locales]) locales = 'zh';\r\n  if (ts.seconds < 60) return i18n[locales].justNow;\r\n  if (ts.minutes < 60) return ts.minutes + ' ' + i18n[locales].minutesAgo;\r\n  if (ts.hours < 24) return ts.hours + ' ' + i18n[locales].hoursAgo;\r\n  if (ts.days < 7) return ts.days + ' ' + i18n[locales].daysAgo;\r\n  if (ts.days < 30) return ~~(ts.days / 7) + ' ' + i18n[locales].weeksAgo;\r\n  if (ts.years < 1) return ~~(ts.days / 30) + ' ' + i18n[locales].monthsAgo;\r\n  return ts.years + ' ' + i18n[locales].yearsAgo;\r\n}\r\n\r\nconst i18n = {\r\n  zh: {\r\n    justNow: '刚刚',\r\n    minutesAgo: '分钟前',\r\n    hoursAgo: '小时前',\r\n    daysAgo: '天前',\r\n    weeksAgo: '周前',\r\n    monthsAgo: '个月前',\r\n    yearsAgo: '年前',\r\n  },\r\n  en: {\r\n    justNow: 'just now',\r\n    minutesAgo: 'minutes ago',\r\n    hoursAgo: 'hours ago',\r\n    daysAgo: 'days ago',\r\n    weeksAgo: 'weeks ago',\r\n    monthsAgo: 'months ago',\r\n    yearsAgo: 'years ago',\r\n  },\r\n};\r\nasync function writeText(strings) {\r\n  if (typeof NativeAndroid !== 'undefined')\r\n    NativeAndroid.writeText(strings);\r\n  else {\r\n    await navigator.clipboard.writeText(strings);\r\n  }\r\n}</script><script>class CustomDialogActions extends HTMLElement {\n\n  constructor() {\n    super();\n    this.attachShadow({\n      mode: 'open'\n    });\n    const wrapper = document.createElement(\"div\");\n    wrapper.setAttribute(\"class\", \"wrapper\");\n    const style = document.createElement('style');\n    style.textContent = `.item{\n      background:#fff;padding:9px 12px;display:flex;align-items: center;justify-content: center;\n      }.wrapper {\n  color: #0f0f0f;\n  -webkit-text-size-adjust: 100%;\n  font-size: 12px;\n  z-index: 1002;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.dialog {\n  position: relative;\n  z-index: 1002;\n  max-height: 180px;\n  overflow-y: auto;\n  color: #0f0f0f;\n  min-width: 250px;\n  max-width: 356px;\n  margin: 40px;\n  border-radius: 8px;\n  background-color: #fff;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 1px;\n  background-color: #dadce0;\noverflow-y:auto;\n\n}\n.dialog::-webkit-scrollbar{\ndisplay:none;\n}\n.overlay {\n  font-family: Roboto, Arial, sans-serif;\n  word-wrap: break-word;\n  color: #0f0f0f;\n  -webkit-text-size-adjust: 100%;\n  font-size: 1.2rem;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 1001;\n  cursor: pointer;\n  background-color: rgba(0, 0, 0, 0.3);\n}`;\n    this.wrapper = wrapper;\n    this.shadowRoot.append(style, wrapper);\n  }\n  navigate(e) {\n    this.dispatchEvent(new CustomEvent('submit', {\n      detail: e.currentTarget.dataset.href\n    }));\n  }\n  close() {\n    this.style.display = 'none';\n  }\n  set data(value) {\n    this.wrapper.insertAdjacentHTML('afterbegin',`\n    <div class=\"dialog\">\n    ${value.map(element => {\n      return `<div bind=\"\" class=\"item\" data-index=\"${element.id}\" @click=\"navigate\">\n      \n      <div class=\"item-title\">\n      ${element.title}\n        </div>\n        </div>`\n    }).join('')}\n    </div>\n    <div bind=\"\" class=\"overlay\" @click=\"close\">\n  </div>`);\n    this.wrapper.querySelectorAll('[bind]').forEach(element => {\n      if (element.getAttribute('bind')) {\n        this[element.getAttribute('bind')] = element;\n      }\n      [...element.attributes].filter(attr => attr.nodeName.startsWith('@')).forEach(attr => {\n        if (!attr.value) return;\n        element.addEventListener(attr.nodeName.slice(1), evt => {\n          this[attr.value](evt);\n        });\n      });\n    })\n  }\n  navigate(evt) {\n    const index = evt.currentTarget.dataset.index;\n    this.dispatchEvent(new CustomEvent('submit', {\n      detail: index\n    }));\n  }\n  connectedCallback() {\n  }\n    static get observedAttributes() {\n    return ['title'];\n  }\n  attributeChangedCallback(name, oldValue, newValue) {\n  }\n}\ncustomElements.define('custom-dialog-actions', CustomDialogActions);\n/*\n<!--\n<script type=\"module\" src=\"./components/custom-dialog-actions.js\"></script>\n<custom-dialog-actions></custom-dialog-actions>\ncustomElements.whenDefined('custom-dialog-actions').then(() => {\n  customDialogActions.data = []\n})\n-->\n*/</script><script>class CustomBottomBar extends HTMLElement {\n\n  constructor() {\n    super();\n    this.attachShadow({\n      mode: 'open'\n    });\n    const wrapper = document.createElement(\"div\");\n    wrapper.setAttribute(\"class\", \"wrapper\");\n    const style = document.createElement('style');\n    style.textContent = ` .item-title {\n      max-width: 100%;\n      padding: 0 4px;\n      box-sizing: border-box;\n      display: block;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n    }\n    \n    .item {\n    \n      display: flex;\n      align-items: center;\n      justify-content: center;\n      flex: 1 1 0%;\n      min-width: 0;\n      flex-direction: column;\n    \n    }\n    \n    .wrapper {\n      display: flex;\n      justify-content: space-around;\n      position: fixed;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      padding: 0 env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);\n      z-index: 3;\n      height: 48px;\n      border-top: 1px solid rgba(0, 0, 0, 0.1);\n      color: #0f0f0f;\n      font-size: 12px;\n      background: #fff;\n    user-select:none;\n    }\n    `;\n    this.wrapper = wrapper;\n    this.shadowRoot.append(style, wrapper);\n  }\n  navigate(e) {\n    this.dispatchEvent(new CustomEvent('submit', {\n      detail: e.currentTarget.dataset.href\n    }));\n  }\n  set data(value) {\n    this.wrapper.insertAdjacentHTML('afterbegin',value.map(element => {\n      return `<div bind=\"\" class=\"item\" data-href=\"${element.href}\" @click=\"navigate\">\n      <svg viewbox=\"0 0 24 24\" style=\"width:24px;height:24px;\">\n      ${element.path}\n      </svg>\n      <div class=\"item-title\">\n      ${element.title}\n        </div>\n        </div>`\n    }).join(''));\n    this.wrapper.querySelectorAll('[bind]').forEach(element => {\n      if (element.getAttribute('bind')) {\n        this[element.getAttribute('bind')] = element;\n      }\n      [...element.attributes].filter(attr => attr.nodeName.startsWith('@')).forEach(attr => {\n        if (!attr.value) return;\n        element.addEventListener(attr.nodeName.slice(1), evt => {\n          this[attr.value](evt);\n        });\n      });\n    })\n  }\n \n  connectedCallback() {\n  }\n}\ncustomElements.define('custom-bottom-bar', CustomBottomBar);\n/*\n<!--\n<script type=\"module\" src=\"./components/custom-bottom-bar.js\"></script>\n<custom-bottom-bar></custom-bottom-bar>\ncustomElements.whenDefined('custom-bottom-bar').then(() => {\n  customBottomBar.data = []\n})\n-->\n*/\n</script><script>class CustomButton extends HTMLElement {\n\n  constructor() {\n    super();\n    this.attachShadow({\n      mode: 'open'\n    });\n    const wrapper = document.createElement(\"div\");\n    wrapper.setAttribute(\"class\", \"wrapper\");\n    const style = document.createElement('style');\n    style.textContent = `.wrapper {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      cursor: pointer;\n      white-space: nowrap;\n      outline: none;\n      letter-spacing: .01785714em;\n      font-family: \"Google Sans\", Roboto, Arial, sans-serif;\n      font-size: 14px;\n      font-weight: 500;\n      line-height: 20px;\n      border-radius: 24px;\n      box-sizing: border-box;\n      border: 1px solid #dadce0;\n      color: #3c4043;\n      padding: 5px 13px;\n    }\n    \n    .selected {\n      border: 1px solid transparent;\n      background: #e8f0fe;\n      color: #1967d2;\n    }`;\n    this.wrapper = wrapper;\n    this.shadowRoot.append(style, wrapper);\n  }\n  navigate(e) {\n    this.dispatchEvent(new CustomEvent('submit', {\n      detail: e.currentTarget.dataset.href\n    }));\n  }\n\n\n  connectedCallback() {\n    this.wrapper.textContent = this.getAttribute('title');\n    if (this.getAttribute('selected')==='true') {\n      this.wrapper.classList.add('selected');\n    }\n  }\n  static get observedAttributes() {\n    return ['title', 'selected'];\n  }\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (name === 'selected') {\n      if(newValue==='true') {\n        this.wrapper.classList.add('selected');\n      }else{\n        this.wrapper.classList.remove('selected');\n      }\n    }\n  }\n}\ncustomElements.define('custom-button', CustomButton);\n/*\n<!--\n<script type=\"module\" src=\"./components/custom-button.js\"></script>\n<custom-button></custom-button>\ncustomElements.whenDefined('custom-button').then(() => {\n  customButton.data = []\n})\n-->\n*/</script><script>class CustomButtons extends HTMLElement {\n\n  constructor() {\n    super();\n    this.attachShadow({\n      mode: 'open'\n    });\n    const wrapper = document.createElement(\"div\");\n    wrapper.setAttribute(\"class\", \"wrapper\");\n    const style = document.createElement('style');\n    style.textContent = `.wrapper{\n      display:flex;align-items: center;gap:8px;\n      overflow-x:scroll;\n      user-select:none;\n      padding:16px;\n      }\n      .wrapper::-webkit-scrollbar{\n        display:none;\n      }\n      `;\n    this.wrapper = wrapper;\n    this.shadowRoot.append(style, wrapper);\n  }\n  navigate(e) {\n    this.dispatchEvent(new CustomEvent('submit', {\n      detail: e.currentTarget.dataset.href\n    }));\n  }\n  set data(value) {\n    this.wrapper.innerHTML = value.map(element => {\n      return `<custom-button style=\"flex-shrink:0\" title=\"${element.title}\" data-index=\"${element.id}\"></custom-button>`\n    }).join('');\n    this.wrapper.querySelectorAll('custom-button').forEach(element => {\n      element.addEventListener('click', evt => {\n        this.click(evt);\n      });\n    })\n  }\n  click(evt) {\n    const index = parseInt(evt.currentTarget.dataset.index);\n    this.selected = index;\n    this.dispatchEvent(new CustomEvent('submit', {\n      detail: index\n    }));\n  }\n  set selected(value) {\n    this.wrapper.querySelectorAll('custom-button').forEach(element => {\n      if (element.dataset.index == value) {\n        element.setAttribute('selected', 'true');\n      }else{\n        element.setAttribute('selected', 'false');\n      }\n    })\n  }\n  connectedCallback() {\n   \n    this.selected = 0;\n  }\n  static get observedAttributes() {\n    return ['title'];\n  }\n  attributeChangedCallback(name, oldValue, newValue) {\n  }\n}\ncustomElements.define('custom-buttons', CustomButtons);\n/*\n<!--\n<script type=\"module\" src=\"./components/custom-buttons.js\"></script>\n<custom-buttons></custom-buttons>\ncustomElements.whenDefined('custom-buttons').then(() => {\n  customButtons.data = [\n      {\n        \"title\": \"TikTok\",\n        \"id\": 0\n      },\n      {\n        \"title\": \"已收藏\",\n        \"id\": 1\n      },\n      {\n        \"title\": \"抖音\",\n        \"id\": 2\n      },\n      {\n        \"title\": \"快手\",\n        \"id\": 3\n      },\n      {\n        \"title\": \"头条\",\n        \"id\": 4\n      },\n      {\n        \"title\": \"Twitter\",\n        \"id\": 5\n      },\n      {\n        \"title\": \"B站\",\n        \"id\": 6\n      },\n      {\n        \"title\": \"YouTue\",\n        \"id\": 7\n      },\n      {\n        \"title\": \"已删除\",\n        \"id\": 8\n      },\n      {\n        \"title\": \"其他\",\n        \"id\": 9\n      }\n    ]\n})\n-->\n*/</script><script>class CustomDialog extends HTMLElement {\n\n  constructor() {\n    super();\n    this.attachShadow({\n      mode: 'open'\n    });\n    const wrapper = document.createElement(\"div\");\n    wrapper.setAttribute(\"class\", \"wrapper\");\n    const style = document.createElement('style');\n    style.textContent = `.wrapper {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  -webkit-box-align: center;\n  align-items: center;\n  -webkit-box-pack: center;\n  justify-content: center;\n  z-index: 4;\n  margin: 0 40px;\n  padding: 0 env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);\n}\n\n.dialog {\n  position: relative;\n  z-index: 2;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  flex-direction: column;\n  max-height: 100%;\n  box-sizing: border-box;\n  padding: 16px;\n  margin: 0 auto;\n  overflow-x: hidden;\n  overflow-y: auto;\n  font-size: 13px;\n  color: #0f0f0f;\n  border: none;\n  min-width: 250px;\n  max-width: 356px;\n  box-shadow: 0 0 24px 12px rgba(0, 0, 0, 0.25);\n  border-radius: 12px;\n  background-color: #fff;\n}\n\n.dialog-header {\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  flex-direction: column;\n  flex-shrink: 0;\n}\n\n.h2 {\n  margin: 0 0 3px;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  max-height: 2.5em;\n  -webkit-line-clamp: 2;\n  overflow: hidden;\n  line-height: 1.25;\n  text-overflow: ellipsis;\n  font-weight: normal;\n  font-size: 18px;\n}\n\n.dialog-body {\n  overflow-y: auto;\n  overflow-x: hidden;\n  max-height: 100vh;\n  white-space: pre-wrap;\n}\n\n.dialog-buttons {\n  display: flex;\n  -webkit-box-align: center;\n  align-items: center;\n  -webkit-box-pack: end;\n  justify-content: flex-end;\n  margin-top: 12px;\n}\n\n.button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0 16px;\n  height: 36px;\n  font-size: 14px;\n  line-height: 36px;\n  border-radius: 18px;\n  color: #0f0f0f;\n}\n\n.disabled {\n  color: #909090\n}\n\n.overlay {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 1;\n  cursor: pointer;\n  background-color: rgba(0, 0, 0, 0.3);\n}`;\n    this.wrapper = wrapper;\n    this.shadowRoot.append(style, wrapper);\n  }\n  navigate(e) {\n    this.dispatchEvent(new CustomEvent('submit', {\n      detail: e.currentTarget.dataset.href\n    }));\n  }\n  _close(evt) {\n    evt.stopPropagation();\n    this.style.display = \"none\";\n    this.dispatchEvent(new CustomEvent('submit', {\n      detail: 1\n    }));\n  }\n  _submit(evt) {\n    evt.stopPropagation();\n    this.style.display = \"none\";\n    this.dispatchEvent(new CustomEvent('submit', {\n      detail: 2\n    }));\n  }\n  connectedCallback() {\n    this.wrapper.innerHTML = `<div class=\"dialog\">\n  <div class=\"dialog-header\">\n    <h2 bind=\"_title\" class=\"h2\">${this.getAttribute(\"title\")}</h2>\n  </div>\n  <div bind=\"_message\" class=\"dialog-body\">${this.getAttribute(\"message\")}</div>\n  <div class=\"dialog-buttons\">\n    <div bind=\"\" class=\"button\" @click=\"_close\">\n      取消\n    </div>\n    <div bind=\"\" class=\"button disabled\" @click=\"_submit\">\n      确定\n    </div>\n  </div>\n</div>\n<div bind=\"\" class=\"overlay\" @click=\"_close\">\n</div>`;\n    this.wrapper.querySelectorAll('[bind]').forEach(element => {\n      if (element.getAttribute('bind')) {\n        this[element.getAttribute('bind')] = element;\n      }\n      [...element.attributes].filter(attr => attr.nodeName.startsWith('@')).forEach(attr => {\n        if (!attr.value) return;\n        element.addEventListener(attr.nodeName.slice(1), evt => {\n          this[attr.value](evt);\n        });\n      });\n    })\n  }\n  static get observedAttributes() {\n    return ['title'];\n  }\n  attributeChangedCallback(name, oldValue, newValue) {\n  }\n  set title(name) {\n    this._title.textContent = name;\n  }\n  set message(value) {\n    this._message.textContent = value;\n  }\n}\ncustomElements.define('custom-dialog', CustomDialog);\n/*\n<!--\n<script type=\"module\" src=\"./components/custom-dialog.js\"></script>\n<custom-dialog></custom-dialog>\ncustomElements.whenDefined('custom-dialog').then(() => {\n  customDialog.data = []\n})\n-->\n*/ </script><script>class CustomToast extends HTMLElement {\n    static get observedAttributes() {\n        return ['message'];\n    }\n    // Fires when an instance of the element is created or updated\n    constructor() {\n        super();\n        this.root = this.attachShadow({\n            mode: 'open'\n        });\n        const style = document.createElement('style');\n        style.textContent = CustomToast.getStyle();\n        this.root.appendChild(style);\n        const c3Toast = document.createElement('DIV');\n        c3Toast.setAttribute('class', 'c3-toast');\n\n        const notificationActionRenderer = document.createElement('DIV');\n        notificationActionRenderer.setAttribute('class', 'notification-action-renderer');\n        const notificationActionResponseText = document.createElement('DIV');\n        notificationActionResponseText.setAttribute('class', 'notification-action-response-text');\n        notificationActionRenderer.appendChild(notificationActionResponseText);\n        c3Toast.appendChild(notificationActionRenderer);\n        this.root.appendChild(c3Toast);\n\n        this.c3Toast = c3Toast;\n        this.notificationActionResponseText = notificationActionResponseText;\n        this.messages = [];\n        this.timer = 0;\n    }\n\n    // Fires when an instance was inserted into the document\n    connectedCallback() {}\n\n    // Fires when an instance was removed from the document\n    disconnectedCallback() {}\n\n    showMessage() {\n        if (this.messages.length && !this.showing) {\n            const message = this.messages.shift();\n            this.notificationActionResponseText.textContent = message;\n            this.c3Toast.setAttribute('dir', 'in');\n            this.showing = true;\n            if (this.timer) {\n                clearTimeout(this.timer);\n            }\n            this.timer = setTimeout(() => {\n                this.c3Toast.setAttribute('dir', 'out');\n                setTimeout(() => {\n                    this.showing = false;\n                    this.showMessage();\n                }, 195);\n            }, 3000);\n        }\n    }\n    // Fires when an attribute was added, removed, or updated\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (attrName === 'message') {\n            this.messages.push(newVal);\n            this.showMessage();\n        }\n    }\n\n    // Fires when an element is moved to a new document\n    adoptedCallback() {}\n    static getTemplate(value) {\n        return `\n        ${CustomToast.getStyle()}\n        <div>\n            ${value}\n        </div>\n        `;\n    }\n    static getStyle() {\n        return `\n        .c3-toast[dir=\"in\"] {\n            transition: margin 225ms cubic-bezier(0.0, 0.0, 0.2, 1);\n            margin-top: 0;\n        }\n        \n        .c3-toast[dir=\"out\"] {\n            transition: margin 195ms cubic-bezier(0.4, 0.0, 1, 1);\n        }\n        \n        .c3-toast {\n            display: block;\n            position: fixed;\n            z-index: 999;\n            left: 0;\n            right: 0;\n            top: 0;\n            box-sizing: border-box;\n            padding: 14px 24px;\n            font-size: 1.4rem;\n            color: #ffffff;\n            background: hsl(0, 0%, 20%);\n            will-change: transform;\n            margin-top: -100%;\n        }\n        \n        .notification-action-renderer {\n            display: flex;\n            align-items: center;\n        }\n        \n        .notification-action-response-text {\n            flex-grow: 1;\n            padding-right: 1rem;\n            font-size:14px;\n        }\n        \n        `;\n    }\n}\ncustomElements.define('custom-toast', CustomToast);\n/*\n<!--\n<custom-toast id=\"toast\"></custom-toast>\n<script src=\"toast.js\"></script>\n document.getElementById('toast').setAttribute('message','');-\n-->\n*/</script><script>class CustomDialogSpinner extends HTMLElement {\n\n  constructor() {\n    super();\n    this.attachShadow({\n      mode: 'open'\n    });\n    const wrapper = document.createElement(\"div\");\n    wrapper.setAttribute(\"class\", \"wrapper\");\n    const style = document.createElement('style');\n    style.textContent = `.wrapper{position:fixed;top:0;left:0;right:0;bottom:0;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;z-index:4;margin:0 40px;padding:0 env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);}.dialog{position:relative;z-index:2;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;max-height:100%;box-sizing:border-box;padding:16px;margin:0 auto;overflow-x:hidden;overflow-y:auto;font-size:13px;color:#0f0f0f;border:none;min-width:250px;max-width:356px;box-shadow:0 0 24px 12px rgba(0,0,0,0.25);border-radius:12px;background-color:#fff;}.dialog-header{display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;flex-shrink:0;}.h2{margin:0 0 3px;display:-webkit-box;-webkit-box-orient:vertical;max-height:2.5em;-webkit-line-clamp:2;overflow:hidden;line-height:1.25;text-overflow:ellipsis;font-weight:normal;font-size:18px;}\n    .dialog-body{\n   display: flex;\n      align-items: center;\n      justify-content: center;\n    \n     overflow-y:auto;overflow-x:hidden;max-height:100vh;white-space:pre-wrap;\n    \n    flex-direction:column;\n    }.dialog-buttons{display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:end;justify-content:flex-end;margin-top:12px;}.button{display:flex;align-items:center;justify-content:center;padding:0 16px;height:36px;font-size:14px;line-height:36px;border-radius:18px;color:#0f0f0f;}.disabled{color:#909090}.overlay{position:fixed;top:0;bottom:0;left:0;right:0;z-index:1;cursor:pointer;background-color:rgba(0,0,0,0.3);}\n    @keyframes spinner {\n      0% {\n          -webkit-transform: rotate(0deg);\n          transform: rotate(0deg)\n      }\n  \n      100% {\n          -webkit-transform: rotate(1turn);\n          transform: rotate(1turn)\n      }\n  }\n  \n  .spinner {\n      display: block;\n      box-sizing: border-box;\n      margin: 12px auto;\n      width: 32px;\n      height: 32px;\n      border-radius: 50%;\n      border: 2px solid #eee;\n      border-top-color: #666;\n      -webkit-animation: spinner .8s linear infinite;\n      animation: spinner .8s linear infinite\n  }`;\n    this.wrapper = wrapper;\n    this.shadowRoot.append(style, wrapper);\n  }\n  navigate(e) {\n    this.dispatchEvent(new CustomEvent('submit', {\n      detail: e.currentTarget.dataset.href\n    }));\n  }\n  \n \n  connectedCallback() {\n    this.wrapper.insertAdjacentHTML('afterbegin',`<div class=\"dialog\">\n    <div class=\"dialog-body\">\n    \n    <div class=\"spinner\">\n      </div>\n   <div> 加载中...</div></div>\n  </div>\n<div class=\"overlay\">\n</div>`);\n    this.wrapper.querySelectorAll('[bind]').forEach(element => {\n      if (element.getAttribute('bind')) {\n        this[element.getAttribute('bind')] = element;\n      }\n      [...element.attributes].filter(attr => attr.nodeName.startsWith('@')).forEach(attr => {\n        if (!attr.value) return;\n        element.addEventListener(attr.nodeName.slice(1), evt => {\n          this[attr.value](evt);\n        });\n      });\n    })\n  }\n    static get observedAttributes() {\n    return ['title'];\n  }\n  attributeChangedCallback(name, oldValue, newValue) {\n  }\n}\ncustomElements.define('custom-dialog-spinner', CustomDialogSpinner);\n/*\n<!--\n<script type=\"module\" src=\"./components/custom-dialog-spinner.js\"></script>\n<custom-dialog-spinner></custom-dialog-spinner>\ncustomElements.whenDefined('custom-dialog-spinner').then(() => {\n  customDialogSpinner.data = []\n})\n-->\n*/</script><script>\r\ncustomElements.whenDefined('custom-buttons').then(() => {\r\n  customButtons.data = [\r\n    {\r\n      \"title\": \"TikTok\",\r\n      \"id\": 0\r\n    },\r\n    {\r\n      \"title\": \"已收藏\",\r\n      \"id\": 1\r\n    },\r\n    {\r\n      \"title\": \"抖音\",\r\n      \"id\": 2\r\n    },\r\n    {\r\n      \"title\": \"快手\",\r\n      \"id\": 3\r\n    },\r\n    {\r\n      \"title\": \"头条\",\r\n      \"id\": 4\r\n    },\r\n    {\r\n      \"title\": \"Twitter\",\r\n      \"id\": 5\r\n    },\r\n    {\r\n      \"title\": \"B站\",\r\n      \"id\": 6\r\n    },\r\n    {\r\n      \"title\": \"YouTue\",\r\n      \"id\": 7\r\n    },\r\n    {\r\n      \"title\": \"已删除\",\r\n      \"id\": 8\r\n    },\r\n    {\r\n      \"title\": \"其他\",\r\n      \"id\": 9\r\n    }\r\n  ]\r\n})\r\n\r\ncustomElements.whenDefined('custom-bottom-bar').then(() => {\r\n  customBottomBar.data = [\r\n    {\r\n      path: `<path d=\"M18.984 20.016v-16.031h-1.969v3h-10.031v-3h-1.969v16.031h13.969zM12 2.016q-0.422 0-0.703 0.281t-0.281 0.703 0.281 0.703 0.703 0.281 0.703-0.281 0.281-0.703-0.281-0.703-0.703-0.281zM18.984 2.016q0.797 0 1.406 0.586t0.609 1.383v16.031q0 0.797-0.609 1.383t-1.406 0.586h-13.969q-0.797 0-1.406-0.586t-0.609-1.383v-16.031q0-0.797 0.609-1.383t1.406-0.586h4.172q0.328-0.891 1.078-1.453t1.734-0.563 1.734 0.563 1.078 1.453h4.172z\"></path>    `,\r\n      title: '粘贴',\r\n      href: \"paste\"\r\n    }, {\r\n      path: `<path d=\"M12 3c0 0-6.186 5.34-9.643 8.232-0.203 0.184-0.357 0.452-0.357 0.768 0 0.553 0.447 1 1 1h2v7c0 0.553 0.447 1 1 1h3c0.553 0 1-0.448 1-1v-4h4v4c0 0.552 0.447 1 1 1h3c0.553 0 1-0.447 1-1v-7h2c0.553 0 1-0.447 1-1 0-0.316-0.154-0.584-0.383-0.768-3.433-2.892-9.617-8.232-9.617-8.232z\"></path>`,\r\n      title: '首页',\r\n      href: \"/\"\r\n    }, {\r\n      path: `<path d=\"M9.984 16.5l6-4.5-6-4.5v9zM12 2.016q4.125 0 7.055 2.93t2.93 7.055-2.93 7.055-7.055 2.93-7.055-2.93-2.93-7.055 2.93-7.055 7.055-2.93z\"></path>`,\r\n      title: '视频',\r\n      href: \"videos\"\r\n    }, {\r\n      path: `<path d=\"M12 15.516q1.453 0 2.484-1.031t1.031-2.484-1.031-2.484-2.484-1.031-2.484 1.031-1.031 2.484 1.031 2.484 2.484 1.031zM19.453 12.984l2.109 1.641q0.328 0.234 0.094 0.656l-2.016 3.469q-0.188 0.328-0.609 0.188l-2.484-0.984q-0.984 0.703-1.688 0.984l-0.375 2.625q-0.094 0.422-0.469 0.422h-4.031q-0.375 0-0.469-0.422l-0.375-2.625q-0.891-0.375-1.688-0.984l-2.484 0.984q-0.422 0.141-0.609-0.188l-2.016-3.469q-0.234-0.422 0.094-0.656l2.109-1.641q-0.047-0.328-0.047-0.984t0.047-0.984l-2.109-1.641q-0.328-0.234-0.094-0.656l2.016-3.469q0.188-0.328 0.609-0.188l2.484 0.984q0.984-0.703 1.688-0.984l0.375-2.625q0.094-0.422 0.469-0.422h4.031q0.375 0 0.469 0.422l0.375 2.625q0.891 0.375 1.688 0.984l2.484-0.984q0.422-0.141 0.609 0.188l2.016 3.469q0.234 0.422-0.094 0.656l-2.109 1.641q0.047 0.328 0.047 0.984t-0.047 0.984z\"></path>`,\r\n      title: '设置',\r\n      href: \"settings\"\r\n    }, {\r\n      path: `<path d=\"M18.984 3h-14.016q-0.797 0-1.383 0.586t-0.586 1.43v13.969q0 0.844 0.586 1.43t1.43 0.586h9.984l6-6v-9.984q0-0.844-0.586-1.43t-1.43-0.586zM6.984 8.016h10.031v1.969h-10.031v-1.969zM12 14.016h-5.016v-2.016h5.016v2.016zM14.016 19.5v-5.484h5.484z\"></path>\r\n      `,\r\n      title: '笔记',\r\n      href: \"notes\"\r\n    }]\r\n})\r\ncustomElements.whenDefined('custom-header').then(() => {\r\n  customHeader.data = {\r\n    title: '首页'\r\n  }\r\n})\r\ncustomElements.whenDefined('custom-dialog-actions').then(() => {\r\n  customDialogActions.data = [\r\n    {\r\n      \"title\": \"视频\",\r\n      \"id\": 0\r\n    },\r\n    {\r\n      \"title\": \"背景音乐\",\r\n      \"id\": 1\r\n    },\r\n    {\r\n      \"title\": \"收藏\",\r\n      \"id\": 2\r\n    },\r\n    {\r\n      \"title\": \"删除\",\r\n      \"id\": 3\r\n    },\r\n    {\r\n      \"title\": \"播放\",\r\n      \"id\": 4\r\n    }, {\r\n      \"title\": \"复制链接\",\r\n      \"id\": 5\r\n    },\r\n  ]\r\n})\r\n\r\nfunction onCustomDrawer(evt) {\r\n  location.href = evt.detail;\r\n}\r\ncustomElements.whenDefined('custom-drawer').then(() => {\r\n  customDrawer.data = [{\r\n    path: `<path d=\"M9.984 20.016h-4.969v-8.016h-3l9.984-9 9.984 9h-3v8.016h-4.969v-6h-4.031v6z\"></path>\r\n`,\r\n    name: \"首页\",\r\n    href: \"/\"\r\n  }, {\r\n    path: `<path d=\"M15.047 11.25q0.938-0.938 0.938-2.25 0-1.641-1.172-2.813t-2.813-1.172-2.813 1.172-1.172 2.813h1.969q0-0.797 0.609-1.406t1.406-0.609 1.406 0.609 0.609 1.406-0.609 1.406l-1.219 1.266q-1.172 1.266-1.172 2.813v0.516h1.969q0-1.547 1.172-2.813zM12.984 18.984v-1.969h-1.969v1.969h1.969zM12 2.016q4.125 0 7.055 2.93t2.93 7.055-2.93 7.055-7.055 2.93-7.055-2.93-2.93-7.055 2.93-7.055 7.055-2.93z\"></path>      `,\r\n    name: \"说明文档\",\r\n    href: \"/editor?id=112\",\r\n    divider: true\r\n  }, {\r\n    path: `<path d=\"M15.047 11.25q0.938-0.938 0.938-2.25 0-1.641-1.172-2.813t-2.813-1.172-2.813 1.172-1.172 2.813h1.969q0-0.797 0.609-1.406t1.406-0.609 1.406 0.609 0.609 1.406-0.609 1.406l-1.219 1.266q-1.172 1.266-1.172 2.813v0.516h1.969q0-1.547 1.172-2.813zM12.984 18.984v-1.969h-1.969v1.969h1.969zM12 2.016q4.125 0 7.055 2.93t2.93 7.055-2.93 7.055-7.055 2.93-7.055-2.93-2.93-7.055 2.93-7.055 7.055-2.93z\"></path>      `,\r\n    name: \"优化资源\",\r\n    href: \"/api/boost\",\r\n    divider: true\r\n  },\r\n  {\r\n    path: `<path d=\"M15.047 11.25q0.938-0.938 0.938-2.25 0-1.641-1.172-2.813t-2.813-1.172-2.813 1.172-1.172 2.813h1.969q0-0.797 0.609-1.406t1.406-0.609 1.406 0.609 0.609 1.406-0.609 1.406l-1.219 1.266q-1.172 1.266-1.172 2.813v0.516h1.969q0-1.547 1.172-2.813zM12.984 18.984v-1.969h-1.969v1.969h1.969zM12 2.016q4.125 0 7.055 2.93t2.93 7.055-2.93 7.055-7.055 2.93-7.055-2.93-2.93-7.055 2.93-7.055 7.055-2.93z\"></path>      `,\r\n    name: \"关闭电报应用\",\r\n    href: \"/api/cmd?q=su+-c+am+force-stop+org.telegram.messenger\",\r\n    divider: true\r\n  },\r\n  {\r\n    path: `<path d=\"M12.516 12.984q0-1.078 1.5-2.391t1.5-2.578q0-1.641-1.195-2.836t-2.836-1.195-2.813 1.195-1.172 2.836h2.016q0-0.797 0.586-1.406t1.383-0.609 1.406 0.609 0.609 1.406q0 0.656-0.469 1.172t-1.031 0.844-1.031 1.102-0.469 1.852h2.016zM12.516 16.5v-2.016h-2.016v2.016h2.016zM11.484 2.016q3.516 0 6.023 2.484t2.508 6q0 3.422-2.203 6.586t-5.813 4.898v-3h-0.516q-3.516 0-6-2.484t-2.484-6 2.484-6 6-2.484z\"></path>`,\r\n    name: \"联系我们\",\r\n    href: \"/message\"\r\n  },\r\n  {\r\n    path: `<path d=\"M12.516 12.984q0-1.078 1.5-2.391t1.5-2.578q0-1.641-1.195-2.836t-2.836-1.195-2.813 1.195-1.172 2.836h2.016q0-0.797 0.586-1.406t1.383-0.609 1.406 0.609 0.609 1.406q0 0.656-0.469 1.172t-1.031 0.844-1.031 1.102-0.469 1.852h2.016zM12.516 16.5v-2.016h-2.016v2.016h2.016zM11.484 2.016q3.516 0 6.023 2.484t2.508 6q0 3.422-2.203 6.586t-5.813 4.898v-3h-0.516q-3.516 0-6-2.484t-2.484-6 2.484-6 6-2.484z\"></path>`,\r\n    name: \"页面\",\r\n    href: \"/editor?id=3\"\r\n  },{\r\n    path: `<path d=\"M12.516 12.984q0-1.078 1.5-2.391t1.5-2.578q0-1.641-1.195-2.836t-2.836-1.195-2.813 1.195-1.172 2.836h2.016q0-0.797 0.586-1.406t1.383-0.609 1.406 0.609 0.609 1.406q0 0.656-0.469 1.172t-1.031 0.844-1.031 1.102-0.469 1.852h2.016zM12.516 16.5v-2.016h-2.016v2.016h2.016zM11.484 2.016q3.516 0 6.023 2.484t2.508 6q0 3.422-2.203 6.586t-5.813 4.898v-3h-0.516q-3.516 0-6-2.484t-2.484-6 2.484-6 6-2.484z\"></path>`,\r\n    name: \"新闻\",\r\n    href: \"/news\"\r\n  }];\r\n});\r\nasync function navigate(evt) {\r\n  switch (evt.detail) {\r\n    case \"paste\":\r\n      await addVideo();\r\n      break;\r\n    case \"videos\":\r\n      window.location = \"/videos\"\r\n      break;\r\n    case \"settings\":\r\n      if (window.localStorage.getItem('order') === \"1\")\r\n        window.localStorage.setItem(\"order\", \"0\");\r\n      else\r\n        window.localStorage.setItem(\"order\", \"1\");\r\n\r\n      break;\r\n    case \"notes\":\r\n      location.href = \"/notes\";\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n}\r\n//////////////////////////////////////\r\n\r\nasync function onButtonsHandler(evt) {\r\n  console.log(evt.detail)\r\n  customItems.data = [];\r\n  o = 0;\r\n  if (intersectionObserver)\r\n    intersectionObserver.unobserve(bottom);\r\n  intersectionObserver = null;\r\n  switch (evt.detail) {\r\n    case 0:\r\n      await render(1, l, o);\r\n      window.history.pushState(null, null, \"?t=1\");\r\n      break;\r\n    case 1:\r\n      await render(-2, l, o);\r\n      window.history.pushState(null, null, \"?t=-2\");\r\n      break;\r\n    case 2:\r\n      await render(3, l, o);\r\n      window.history.pushState(null, null, \"?t=3\");\r\n      break;\r\n    case 3:\r\n      await render(5, l, o);\r\n      window.history.pushState(null, null, \"?t=5\");\r\n      break;\r\n    case 4:\r\n      await render(4, l, o);\r\n      window.history.pushState(null, null, \"?t=4\");\r\n      break; 5\r\n    case 5:\r\n      await render(2, l, o);\r\n      window.history.pushState(null, null, \"?t=2\");\r\n      break;\r\n    case 9:\r\n      await render(-1, l, o);\r\n      window.history.pushState(null, null, \"?t=-1\");\r\n      break;\r\n  }\r\n}\r\n\r\nasync function onItemsHandler(evt) {\r\n  customDialogActions.removeAttribute('style');\r\n  customDialogActions.dataset.id = evt.detail;\r\n}\r\n\r\nasync function onActionsHanlder(evt) {\r\n  const id = evt.currentTarget.dataset.id;\r\n  console.log(evt.detail)\r\n  switch (evt.detail) {\r\n    case \"0\":\r\n      await downloadVideo(id, true, false);\r\n      break;\r\n    case \"2\":\r\n      await addFav(id);\r\n      break;\r\n    case \"3\":\r\n      deleteVideo(id);\r\n      break;\r\n    case \"4\":\r\n      await downloadVideo(id, true, true);\r\n      break;\r\n    case \"5\":\r\n      copyUrl(id);\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n}\r\nasync function addFav(id) {\r\n  try {\r\n    const response = await fetch(`${baseUri}/api/video?t=-2&id=${id}`);\r\n    if (response.status > 399 || response.status < 200) {\r\n      throw new Error(`${response.status}: ${response.statusText}`)\r\n    }\r\n    await response.text();\r\n    window.location.reload();\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\nasync function onDialogHandler(evt) {\r\n  if (evt.detail !== 2) return;\r\n  const id = evt.currentTarget.dataset.id;\r\n  const response = await fetch(`${baseUri}/api/tiktok?action=3&id=${id}`);\r\n  if (response.status > 399 || response.status < 200) {\r\n    throw new Error(`${response.status}: ${response.statusText}`)\r\n  }\r\n  await response.text();\r\n  window.location.reload();\r\n}\r\nasync function deleteVideo(id) {\r\n  customDialogActions.setAttribute('style', 'display:none');\r\n  customDialog.removeAttribute('style');\r\n  customDialog.title = \"询问\"\r\n  customDialog.message = \"您确定要删除吗？\"\r\n  customDialog.dataset.id = id;\r\n}\r\nasync function loadVideo(id) {\r\n  const response = await fetch(`${baseUri}/api/tiktok?action=2&id=${id}`);\r\n  if (response.status > 399 || response.status < 200) {\r\n    throw new Error(`${response.status}: ${response.statusText}`)\r\n  }\r\n  return await response.json();\r\n}\r\n\r\nasync function downloadVideo(id, hd, isPlay) {\r\n  let obj = await loadVideo(id);\r\n  customDialogActions.setAttribute('style', 'display:none');\r\n  let uri = `${obj.play}`;\r\n  if (uri.startsWith(\"/\")) {\r\n    uri = \"https://www.tikwm.com\" + (hd ? uri : uri.replace('/hdplay', '/play'));\r\n  }\r\n  let fileName = substringAfterLast(uri, \"/\");\r\n  if (obj.video_type === \"4\") {\r\n\r\n    const response = await fetch(`${baseUri}/api/toutiao?action=1&q=${obj.url}`);\r\n    if (response.status > 399 || response.status < 200) {\r\n      throw new Error(`${response.status}: ${response.statusText}`)\r\n    }\r\n    fileName = obj.title + \".mp4\";\r\n    uri = await response.text();\r\n    uri = decodeURIComponent(uri);\r\n    /*\r\n     obj = await response.json();\r\n    fileName = obj.data.title + \".mp4\";\r\n    obj = obj.data.videoResource.normal.video_list;\r\n     uri = Object.keys(obj).map(x => {\r\n        return obj[x]\r\n      }).sort((x, y) => {\r\n        return y.size - x.size\r\n      })[1].main_url;\r\n    uri = atob(uri);\r\n    */\r\n\r\n  }\r\n  if (obj.video_type === \"-1\") {\r\n    const response = await fetch(`${baseUri}/api/xvideos?action=1&q=${substringAfterLast(obj.url, \"www.xvideos.com\")}`);\r\n    if (response.status > 399 || response.status < 200) {\r\n      throw new Error(`${response.status}: ${response.statusText}`)\r\n    }\r\n    fileName = obj.title + \".mp4\";\r\n    uri = await response.text();\r\n  }\r\n  if (isPlay) {\r\n    window.open(`/video?q=${encodeURIComponent(uri)}`)\r\n  } else {\r\n    if (typeof NativeAndroid !== 'undefined') {\r\n      NativeAndroid.downloadFile(fileName, uri);\r\n    } else {\r\n      await navigator.clipboard.writeText(uri)\r\n      window.open(uri, '_blank');\r\n    }\r\n  }\r\n}\r\n\r\nasync function copyUrl(id) {\r\n  let obj = await loadVideo(id);\r\n  customDialogActions.setAttribute('style', 'display:none');\r\n  let uri = `${obj.url}`;\r\n  if (obj.video_type === \"-1\") {\r\n    uri = `https://www.xvideos.com${uri}`;\r\n  }\r\n\r\n  writeText(uri);\r\n}\r\nasync function loadData(t, l, o) {\r\n\r\n  const response = await fetch(`${baseUri}/api/tiktok?action=1&t=${t}&l=${l}&o=${o}` + (s ? \"&s=1\" : ''));\r\n  if (response.status > 399 || response.status < 200) {\r\n    throw new Error(`${response.status}: ${response.statusText}`)\r\n  }\r\n  return await response.json();\r\n\r\n}\r\n\r\n\r\n// customItems\r\nlet loaded = false;\r\n\r\nasync function render(t, l, o) {\r\n  try {\r\n    const data = await loadData(t, l, o);\r\n    if (!loaded) {\r\n      await customElements.whenDefined('custom-items');\r\n      loaded = true;\r\n    }\r\n    customItems.data = data\r\n\r\n    if (data.length >= 20 && !intersectionObserver) {\r\n\r\n      intersectionObserver = new IntersectionObserver(entries => {\r\n        entries.forEach(async (entry) => {\r\n          if (entry.isIntersecting) {\r\n            o += l;\r\n            try {\r\n              await render((new URL(window.location).searchParams.get(\"t\") || \"1\"), l, o)\r\n            } catch (error) {\r\n              intersectionObserver.unobserve(bottom);\r\n            }\r\n          }\r\n        });\r\n      });\r\n      intersectionObserver.observe(bottom);\r\n    }\r\n    //customItems.data = data;\r\n  } catch (error) {\r\n    console.log(error);\r\n    return null;\r\n  }\r\n}\r\n\r\n\r\nasync function addVideo() {\r\n  customDialogSpinner.removeAttribute('style');\r\n  let strings = await readText();\r\n  try {\r\n    if (strings.indexOf(\"tiktok.com\") != -1) {\r\n      await saveVideo('tiktok', strings);\r\n    }\r\n    // https://twitter.com/i/status/1613267285279383566\r\n    if (strings.indexOf(\"twitter.com\") != -1) {\r\n      await saveVideo(\"twitter\", /(?<=\\/)[0-9]+/.exec(strings)[0]);\r\n    }\r\n    if (strings.indexOf(\"v.douyin.com\") != -1) {\r\n      await saveVideo(\"douyin\", substring(strings, \"https://v.douyin.com\", \" \"));\r\n    }\r\n    if (strings.indexOf(\"m.toutiao.com\") != -1) {\r\n      await saveVideo(\"toutiao\", substring(strings, \"https://m.toutiao.com\", \" \"));\r\n    }\r\n    if (strings.indexOf(\"v.kuaishou.com\") != -1) {\r\n      await saveVideo(\"kuaishou\", substring(strings, \"https://v.kuaishou.com\", \" \"));\r\n    }\r\n    if (strings.indexOf(\"www.xvideos.com\") != -1) {\r\n      await saveVideo(\"xvideos\", substringAfterLast(strings, \"https://www.xvideos.com\"));\r\n    }\r\n    location.reload();\r\n  } catch (error) {\r\n    customToast.setAttribute('message', '发生错误')\r\n  }\r\n  customDialogSpinner.setAttribute('style', 'display:none');\r\n}\r\n\r\nasync function saveVideo(uri, q) {\r\n  const response = await fetch(`${baseUri}/api/${uri}?q=${encodeURIComponent(q)}`);\r\n  if (response.status > 399 || response.status < 200) {\r\n    throw new Error(`${response.status}: ${response.statusText}`)\r\n  }\r\n  return await response.text();\r\n}\r\n\r\nfunction substringAfterLast(string, delimiter, missingDelimiterValue) {\r\n  const index = string.lastIndexOf(delimiter);\r\n  if (index === -1) {\r\n    return missingDelimiterValue || string;\r\n  } else {\r\n    return string.substring(index + delimiter.length);\r\n  }\r\n}\r\nfunction substringBefore(string, delimiter, missingDelimiterValue) {\r\n  const index = string.indexOf(delimiter);\r\n  if (index === -1) {\r\n    return missingDelimiterValue || string;\r\n  } else {\r\n    return string.substring(0, index);\r\n  }\r\n}\r\nfunction substring(strings, prefix, suffix) {\r\n  let start = strings.indexOf(prefix);\r\n  if (start === -1) {\r\n    return strings;\r\n  }\r\n  start += prefix.length;\r\n  let end = strings.indexOf(suffix, start);\r\n  if (end === -1) {\r\n    return strings;\r\n  }\r\n  return strings.substring(start, end);\r\n}\r\n\r\nasync function readText() {\r\n  let strings;\r\n  if (typeof NativeAndroid !== 'undefined')\r\n    strings = NativeAndroid.readText();\r\n  else {\r\n    strings = await navigator.clipboard.readText();\r\n  }\r\n  return strings;\r\n}\r\nasync function writeText(strings) {\r\n  if (typeof NativeAndroid !== 'undefined')\r\n    NativeAndroid.writeText(strings);\r\n  else {\r\n    await navigator.clipboard.writeText(strings);\r\n  }\r\n}\r\n//////////////////////////////////////\r\nlet baseUri = window.location.host === '127.0.0.1:5500' ? 'http://192.168.0.109:10808' : '';\r\n\r\nlet t = new URL(window.location).searchParams.get(\"t\") || \"1\";\r\nlet l = 20, o = 0, intersectionObserver, s = parseInt(window.localStorage.getItem(\"order\") || \"0\");\r\ncustomElements.whenDefined('custom-buttons').then(() => {\r\n  if (t === \"1\") {\r\n    customButtons.selected = 0;\r\n  }\r\n  if (t === \"-2\") {\r\n    customButtons.selected = 1;\r\n  }\r\n  if (t === \"3\") {\r\n    customButtons.selected = 2;\r\n  }\r\n  if (t === \"5\") {\r\n    customButtons.selected = 3;\r\n  }\r\n  if (t === \"4\") {\r\n    customButtons.selected = 4;\r\n  }\r\n  if (t === \"2\") {\r\n    customButtons.selected = 5;\r\n  }\r\n  if (t === \"-1\") {\r\n    customButtons.selected = 9;\r\n  }\r\n})\r\n\r\nrender(t, l, o);\r\n\r\n\r\nwindow.addEventListener(\"popstate\", function (e) {\r\n  t = new URL(window.location).searchParams.get(\"t\") || \"1\";\r\n  customItems.data = [];\r\n  if (t === \"1\") {\r\n    customButtons.selected = 0;\r\n  }\r\n  if (t === \"-2\") {\r\n    customButtons.selected = 1;\r\n  }\r\n  if (t === \"3\") {\r\n    customButtons.selected = 2;\r\n  }\r\n  if (t === \"5\") {\r\n    customButtons.selected = 3;\r\n  }\r\n  if (t === \"4\") {\r\n    customButtons.selected = 4;\r\n  }\r\n  if (t === \"2\") {\r\n    customButtons.selected = 5;\r\n  }\r\n  if (t === \"-1\") {\r\n    customButtons.selected = 9;\r\n  }\r\n  render(t, l,0);\r\n});</script></body>\r\n\r\n</html>"