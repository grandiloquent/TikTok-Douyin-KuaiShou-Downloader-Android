#define NOTES "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>笔记</title>\r\n    \r\n    \r\n    \r\n    \r\n    \r\n<style>\r\nbutton {\r\n    padding: 0;\r\n    border: none;\r\n    outline: none;\r\n    font: inherit;\r\n    text-transform: inherit;\r\n    color: inherit;\r\n    background: transparent\r\n}\r\n\r\nhtml {\r\n    color: #0f0f0f;\r\n    background-color: #fff;\r\n    font-size: 10px;\r\n    font-family: Roboto, Arial, sans-serif\r\n}\r\n\r\nbody {\r\n    margin: 0;\r\n    padding: 0;\r\n    padding: 0 env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);\r\n    font-size: 1.2rem;\r\n    overflow-x: hidden\r\n}\r\n\r\nheader {\r\n    height: 48px\r\n}\r\n\r\n* {\r\n    -ms-flex: 0 1 auto\r\n}\r\n\r\n\r\nhtml {\r\n    word-wrap: break-word;\r\n    color: #0f0f0f;\r\n    background-color: #fff;\r\n    -webkit-text-size-adjust: 100%\r\n}\r\n\r\ninput,\r\ntextarea {\r\n    background-color: transparent;\r\n    padding-bottom: 4px;\r\n    outline: none;\r\n    box-sizing: border-box;\r\n    border: none;\r\n    border-radius: 0;\r\n    margin-bottom: 1px;\r\n    font: inherit;\r\n    color: #0f0f0f\r\n}\r\n\r\ninput::-webkit-input-placeholder,\r\ntextarea::-webkit-input-placeholder {\r\n    color: #606060;\r\n    opacity: 1\r\n}\r\n\r\ninput::placeholder,\r\ntextarea::placeholder {\r\n    color: #606060;\r\n    opacity: 1\r\n}\r\n\r\ntextarea {\r\n    -webkit-appearance: none;\r\n    appearance: none;\r\n    min-height: 8.4rem;\r\n    width: 100%;\r\n    border: 1px solid rgba(0, 0, 0, 0.1);\r\n    padding: 8px\r\n}\r\n\r\ninput {\r\n    border-bottom: 1px solid #737373;\r\n    text-overflow: ellipsis\r\n}\r\n\r\ninput:focus {\r\n    margin-bottom: 0;\r\n    border-bottom-width: 2px;\r\n    border-bottom-color: #0f0f0f\r\n}\r\n\r\nform {\r\n    margin: 0\r\n}\r\n\r\na {\r\n    color: currentColor;\r\n    text-decoration: none\r\n}\r\n\r\nstrong,\r\nb {\r\n    font-weight: 500\r\n}\r\n\r\nh1,\r\nh2,\r\nh3,\r\nh4 {\r\n    margin: 0 0 3px\r\n}\r\n\r\nh2 {\r\n    font-size: 1.8rem\r\n}\r\n\r\nh3 {\r\n    font-size: 1.4rem\r\n}\r\n\r\nh4 {\r\n    font-size: 1.3rem\r\n}\r\n\r\nimg {\r\n    min-width: 1px;\r\n    min-height: 1px;\r\n    -webkit-filter: none;\r\n    filter: none\r\n}\r\n\r\n:focus {\r\n    outline: none\r\n}\r\n\r\np {\r\n    margin: 8px 0;\r\n    line-height: 1.25\r\n}</style></head>\r\n\r\n<body>\r\n    <custom-drawer bind=\"customDrawer\" @submit=\"onCustomDrawer\"></custom-drawer>\r\n    <custom-header title=\"首页\" bind=\"customHeader\" @submit=\"showDrawer\" @search=\"onSearch\"></custom-header>\r\n    <div style=\"height: 56px;\"></div>\r\n    <custom-buttons bind=\"customButtons\" @submit=\"onButtonsHandler\"></custom-buttons>\r\n    <div bind=\"wrapper\" style=\"-webkit-tap-highlight-color: transparent;box-sizing: border-box;border-left: none;border-right: none;border-radius: 0;padding: 0 16px\">\r\n\r\n    </div>\r\n    <div bind=\"searchWrapper\" style=\"position: fixed;z-index: 9998;background: white;border-radius: 8px 8px 0 0;left:0;top:0;right:0;bottom:0;display: none;\">\r\n        <div style=\"height: 60px;display: flex;align-items: center;\">\r\n            <div style=\"height: 60px;width: 48px;display: flex;align-items: center;justify-content: center;\">\r\n                <svg style=\"width: 24px;\" viewbox=\"0 0 24 24\">\r\n                    <path d=\"M9.516 14.016q1.875 0 3.188-1.313t1.313-3.188-1.313-3.188-3.188-1.313-3.188 1.313-1.313 3.188 1.313 3.188 3.188 1.313zM15.516 14.016l4.969 4.969-1.5 1.5-4.969-4.969v-0.797l-0.281-0.281q-1.781 1.547-4.219 1.547-2.719 0-4.617-1.875t-1.898-4.594 1.898-4.617 4.617-1.898 4.594 1.898 1.875 4.617q0 0.984-0.469 2.227t-1.078 1.992l0.281 0.281h0.797z\">\r\n                    </path>\r\n                </svg>\r\n            </div>\r\n            <input bind=\"input\" @keydown=\"onInput\" type=\"text\" placeholder=\"搜索\" style=\"border: none;height: 60px;font-size: 16px;\r\n            line-height: 60px;\r\n            padding:0;\r\n        flex-grow: 1;\r\n            \">\r\n            <div bind=\"close\" @click=\"onClose\" style=\"height: 60px;width: 48px;display: flex;align-items: center;justify-content: center;\">\r\n                <svg style=\"width: 24px;\" viewbox=\"0 0 24 24\">\r\n                    <path d=\"M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z\"></path>\r\n                </svg>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \r\n\r\n<script>class CustomHeader extends HTMLElement {\n\n  constructor() {\n    super();\n    this.attachShadow({\n      mode: 'open'\n    });\n    const style = document.createElement('style');\n    style.textContent = `.header {\n  color: black;\n  min-width: 320px;\n  transition: box-shadow 250ms;\n  top: 0;\n  width: 100%;\n  display: block;\n  font: 13px/27px Roboto, Arial, sans-serif;\n  z-index: 986;\n  position: fixed;\n  left: 0;\n  right: 0;\n  background-color: rgba(255, 255, 255, 1);\n}\n\n.wrapper {\n  box-sizing: border-box;\n  position: relative;\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  transition: background-color .4s;\n  padding: 4px;\n  padding-left: 8px;\n  min-width: 0;\n}\n\n.left {\n  height: 48px;\n  vertical-align: middle;\n  white-space: nowrap;\n  -webkit-box-align: center;\n  align-items: center;\n  display: flex;\n  -webkit-user-select: none;\n  box-sizing: border-box;\n  padding-right: 14px;\n  flex: 1 1 auto;\n  overflow: hidden;\n}\n\n.middle {\n  height: 48px;\n  white-space: nowrap;\n  align-items: center;\n  display: flex;\n  -webkit-user-select: none;\n  justify-content: flex-end;\n  flex: 0 0 auto;\n}\n\n.svg {\n  fill: currentColor;\n  opacity: 1;\n  border-radius: 50%;\n  padding: 8px;\n  margin: 3px;\n  color: unset;\n  margin-left: 1px;\n  margin-right: 1px;\n}\n\n.title {\n  display: inline-block;\n  font-size: 22px;\n  line-height: 24px;\n  position: relative;\n  vertical-align: middle;\n  color: #5f6368;\n  opacity: 1;\n  padding-left: 0;\n}\n\n.hamburger-menu {\n  border-radius: 50%;\n  display: inline-block;\n  padding: 12px;\n  overflow: hidden;\n  vertical-align: middle;\n  cursor: pointer;\n  height: 24px;\n  width: 24px;\n  -webkit-user-select: none;\n  flex: 0 0 auto;\n  margin: 0 4px 0 0;\n}`;\n    this.shadowRoot.append(style);\n  }\n  get showing() {\n    return this.isShowing || false;\n  }\n  set showing(val) {\n    if (val) {\n      this.header.style = 'box-shadow:0px 4px 5px 0px rgb(0 0 0 / 14%), 0px 1px 10px 0px rgb(0 0 0 / 12%), 0px 2px 4px -1px rgb(0 0 0 / 20%)';\n    } else {\n      this.header.style = '';\n    }\n    this.isShowing = val;\n  }\n  showDrawer() {\n    this.dispatchEvent(new CustomEvent('submit'));\n  }\n\n  connectedCallback() {\n    const header = document.createElement('div');\n    header.setAttribute(\"bind\", \"header\");\n    header.setAttribute(\"class\", \"header\");\n    if (this.showing) {\n      header.setAttribute('style', 'box-shadow:0px 4px 5px 0px rgb(0 0 0 / 14%), 0px 1px 10px 0px rgb(0 0 0 / 12%), 0px 2px 4px -1px rgb(0 0 0 / 20%)');\n    }\n    this.shadowRoot.appendChild(header);\n    const wrapper = document.createElement('div');\n    wrapper.setAttribute(\"class\", \"wrapper\");\n    header.appendChild(wrapper);\n    const left = document.createElement('div');\n    left.setAttribute(\"class\", \"left\");\n    wrapper.appendChild(left);\n    const hamburgerMenu = document.createElement('div');\n    hamburgerMenu.setAttribute(\"class\", \"hamburger-menu\");\n\n    left.appendChild(hamburgerMenu);\n    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svg.setAttribute(\"focusable\", \"false\");\n    svg.setAttribute(\"viewBox\", \"0 0 24 24\");\n    hamburgerMenu.appendChild(svg);\n    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    path.setAttribute(\"d\", \"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\");\n    svg.appendChild(path);\n    const title = document.createElement('div');\n    title.setAttribute(\"class\", \"title\");\n    left.appendChild(title);\n    title.textContent = `${this.getAttribute('title')}`;\n    const middle = document.createElement('div');\n    middle.setAttribute(\"class\", \"middle\");\n    wrapper.appendChild(middle);\n    const svg1 = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svg1.setAttribute(\"class\", \"svg\");\n    svg1.setAttribute(\"focusable\", \"false\");\n    svg1.setAttribute(\"height\", \"24px\");\n    svg1.setAttribute(\"viewBox\", \"0 0 24 24\");\n    svg1.setAttribute(\"width\", \"24px\");\n    svg1.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\n    middle.appendChild(svg1);\n    const path2 = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    path2.setAttribute(\"d\", \"M20.49,19l-5.73-5.73C15.53,12.2,16,10.91,16,9.5C16,5.91,13.09,3,9.5,3S3,5.91,3,9.5C3,13.09,5.91,16,9.5,16 c1.41,0,2.7-0.47,3.77-1.24L19,20.49L20.49,19z M5,9.5C5,7.01,7.01,5,9.5,5S14,7.01,14,9.5S11.99,14,9.5,14S5,11.99,5,9.5z\");\n    svg1.appendChild(path2);\n    const path3 = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    path3.setAttribute(\"d\", \"M0,0h24v24H0V0z\");\n    path3.setAttribute(\"fill\", \"none\");\n    svg1.appendChild(path3);\n\n    middle.addEventListener('click', evt => {\n      this.dispatchEvent(new CustomEvent('search'));\n    })\n    hamburgerMenu.addEventListener('click', this.showDrawer.bind(this))\n    document.addEventListener(\"scroll\", () => {\n      this.showing = window.scrollY > 56;\n    });\n  }\n}\ncustomElements.define('custom-header', CustomHeader);\n/*\n<!--\n<script type=\"module\" src=\"./components/custom-header.js\"></script>\n<custom-header></custom-header>\ncustomElements.whenDefined('custom-header').then(() => {\n  customHeader.data = []\n})\n-->\n*/</script><script>class CustomDrawer extends HTMLElement {\n\n  constructor() {\n    super();\n    this.attachShadow({\n      mode: 'open'\n    });\n    const wrapper = document.createElement(\"div\");\n    wrapper.setAttribute(\"class\", \"wrapper\");\n    const style = document.createElement('style');\n    style.textContent = `.name {\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n    \n    .main {\n      display: flex;\n      flex: 1 1 auto;\n      flex-direction: column;\n    }\n    \n    .overlay {\n      position: fixed;\n      right: 0;\n      top: 0;\n      left: 0;\n      bottom: 0;\n      z-index: 991;\n      cursor: pointer;\n    }\n    \n    .top {\n      position: relative;\n      top: 2px;\n      -webkit-user-select: none;\n      min-height: 48px;\n      display: table-cell;\n      height: 48px;\n      vertical-align: middle;\n      padding-top: 4px;\n      padding-bottom: 4px;\n      padding-left: 16px;\n    }\n    \n    .item {\n      text-decoration: none;\n      letter-spacing: .01785714em;\n      font-size: 14px;\n      font-weight: 500;\n      line-height: 20px;\n      height: 48px;\n      display: flex;\n      -webkit-box-align: center;\n      align-items: center;\n      padding-left: 24px;\n      padding-right: 12px;\n      margin-right: 8px;\n      border-radius: 0 50px 50px 0;\n      cursor: pointer;\n      color: inherit;\n    }\n    \n    .wrapper {\n      background-color: #fff;\n      bottom: 0;\n      color: #000;\n      overflow-x: hidden;\n      position: fixed;\n      top: 0;\n      bottom: 0;\n      z-index: 992;\n      will-change: visibility;\n      display: flex;\n      flex-direction: column;\n    }\n    \n    .divider {\n      border-bottom: 1px solid #e8eaed;\n      margin: 8px 8px 8px 0;\n    }\n    `;\n    wrapper.style = 'transition:transform .25s cubic-bezier(0.4,0.0,0.2,1),visibility 0s linear .25s;transform:translateX(-264px)'\n    const top = document.createElement('div');\n    top.setAttribute(\"class\", \"top\");\n    const main = document.createElement('div');\n    main.setAttribute(\"class\", \"main\");\n    wrapper.append(top, main);\n    this.wrapper = wrapper;\n    this.main = main;\n    const overlay = document.createElement('div');\n    overlay.setAttribute(\"class\", \"overlay\");\n    overlay.style.display = 'none';\n    this.overlay = overlay;\n    this.shadowRoot.append(style, wrapper, overlay);\n    overlay.addEventListener('click', () => {\n      this.wrapper.style = 'transition:transform .25s cubic-bezier(0.4,0.0,0.2,1),visibility 0s linear .25s;transform:translateX(-264px)'\n      this.overlay.style.display = 'none';\n    })\n  }\n \n  set data(value) {\n    value.forEach(element => {\n      const item = document.createElement('div');\n      item.setAttribute(\"bind\", \"\");\n      item.setAttribute(\"class\", \"item\");\n \n      this.main.appendChild(item);\n      const div = document.createElement('div');\n      div.style.width = \"24px\";\n      div.style.height = \"24px\";\n      div.style.fill = \"currentColor\";\n      div.style.color = \"#333\";\n      div.style.display = \"flex\";\n      div.style.alignItems = \"center\";\n      div.style.justifyContent = \"center\";\n      div.style.marginRight = \"16px\";\n      const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n      svg.setAttribute(\"viewBox\", \"0 0 24 24\");\n      svg.style.width = \"24px\";\n      svg.style.height = \"24px\";\n      item.appendChild(div);\n      div.appendChild(svg);\n      svg.innerHTML = `${element.path}`;\n      const name = document.createElement('div');\n      name.setAttribute(\"class\", \"name\");\n      item.appendChild(name);\n      name.textContent = `${element.name}`;\n      item.addEventListener('click', evt => {\n        this.dispatchEvent(new CustomEvent('submit', {\n          detail:element.href\n        }));\n      })\n    });\n\n  }\n\n  connectedCallback() {\n\n  }\n  static get observedAttributes() {\n    return ['expand'];\n  }\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (name === \"expand\") {\n      this.wrapper.style = 'transform: translateX(0);visibility: visible;box-shadow: 0 0 16px rgba(0,0,0,.28);transition: transform .25s cubic-bezier(0.4,0.0,0.2,1),visibility 0s linear 0s;overflow-y: visible;width: 256px;';\n      this.overlay.style.display = 'block';\n    }\n  }\n}\ncustomElements.define('custom-drawer', CustomDrawer);\n/*\n<!--\n<script type=\"module\" src=\"./components/custom-drawer.js\"></script>\n<custom-drawer></custom-drawer>\ncustomElements.whenDefined('custom-drawer').then(() => {\n  customDrawer.data = []\n})\n-->\n*/</script><script>class CustomButton extends HTMLElement {\n\n  constructor() {\n    super();\n    this.attachShadow({\n      mode: 'open'\n    });\n    const wrapper = document.createElement(\"div\");\n    wrapper.setAttribute(\"class\", \"wrapper\");\n    const style = document.createElement('style');\n    style.textContent = `.wrapper {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      cursor: pointer;\n      white-space: nowrap;\n      outline: none;\n      letter-spacing: .01785714em;\n      font-family: \"Google Sans\", Roboto, Arial, sans-serif;\n      font-size: 14px;\n      font-weight: 500;\n      line-height: 20px;\n      border-radius: 24px;\n      box-sizing: border-box;\n      border: 1px solid #dadce0;\n      color: #3c4043;\n      padding: 5px 13px;\n    }\n    \n    .selected {\n      border: 1px solid transparent;\n      background: #e8f0fe;\n      color: #1967d2;\n    }`;\n    this.wrapper = wrapper;\n    this.shadowRoot.append(style, wrapper);\n  }\n  navigate(e) {\n    this.dispatchEvent(new CustomEvent('submit', {\n      detail: e.currentTarget.dataset.href\n    }));\n  }\n\n\n  connectedCallback() {\n    this.wrapper.textContent = this.getAttribute('title');\n    if (this.getAttribute('selected')==='true') {\n      this.wrapper.classList.add('selected');\n    }\n  }\n  static get observedAttributes() {\n    return ['title', 'selected'];\n  }\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (name === 'selected') {\n      if(newValue==='true') {\n        this.wrapper.classList.add('selected');\n      }else{\n        this.wrapper.classList.remove('selected');\n      }\n    }\n  }\n}\ncustomElements.define('custom-button', CustomButton);\n/*\n<!--\n<script type=\"module\" src=\"./components/custom-button.js\"></script>\n<custom-button></custom-button>\ncustomElements.whenDefined('custom-button').then(() => {\n  customButton.data = []\n})\n-->\n*/</script><script>class CustomButtons extends HTMLElement {\n\n  constructor() {\n    super();\n    this.attachShadow({\n      mode: 'open'\n    });\n    const wrapper = document.createElement(\"div\");\n    wrapper.setAttribute(\"class\", \"wrapper\");\n    const style = document.createElement('style');\n    style.textContent = `.wrapper{\n      display:flex;align-items: center;gap:8px;\n      overflow-x:scroll;\n      user-select:none;\n      padding:16px;\n      }\n      .wrapper::-webkit-scrollbar{\n        display:none;\n      }\n      `;\n    this.wrapper = wrapper;\n    this.shadowRoot.append(style, wrapper);\n  }\n  navigate(e) {\n    this.dispatchEvent(new CustomEvent('submit', {\n      detail: e.currentTarget.dataset.href\n    }));\n  }\n  set data(value) {\n    this.wrapper.innerHTML = value.map(element => {\n      return `<custom-button style=\"flex-shrink:0\" title=\"${element.title}\" data-index=\"${element.id}\"></custom-button>`\n    }).join('');\n    this.wrapper.querySelectorAll('custom-button').forEach(element => {\n      element.addEventListener('click', evt => {\n        this.click(evt);\n      });\n    })\n  }\n  click(evt) {\n    const index = parseInt(evt.currentTarget.dataset.index);\n    this.selected = index;\n    this.dispatchEvent(new CustomEvent('submit', {\n      detail: index\n    }));\n  }\n  set selected(value) {\n    this.wrapper.querySelectorAll('custom-button').forEach(element => {\n      if (element.dataset.index == value) {\n        element.setAttribute('selected', 'true');\n      }else{\n        element.setAttribute('selected', 'false');\n      }\n    })\n  }\n  connectedCallback() {\n   \n    this.selected = 0;\n  }\n  static get observedAttributes() {\n    return ['title'];\n  }\n  attributeChangedCallback(name, oldValue, newValue) {\n  }\n}\ncustomElements.define('custom-buttons', CustomButtons);\n/*\n<!--\n<script type=\"module\" src=\"./components/custom-buttons.js\"></script>\n<custom-buttons></custom-buttons>\ncustomElements.whenDefined('custom-buttons').then(() => {\n  customButtons.data = [\n      {\n        \"title\": \"TikTok\",\n        \"id\": 0\n      },\n      {\n        \"title\": \"已收藏\",\n        \"id\": 1\n      },\n      {\n        \"title\": \"抖音\",\n        \"id\": 2\n      },\n      {\n        \"title\": \"快手\",\n        \"id\": 3\n      },\n      {\n        \"title\": \"头条\",\n        \"id\": 4\n      },\n      {\n        \"title\": \"Twitter\",\n        \"id\": 5\n      },\n      {\n        \"title\": \"B站\",\n        \"id\": 6\n      },\n      {\n        \"title\": \"YouTue\",\n        \"id\": 7\n      },\n      {\n        \"title\": \"已删除\",\n        \"id\": 8\n      },\n      {\n        \"title\": \"其他\",\n        \"id\": 9\n      }\n    ]\n})\n-->\n*/</script><script>function bindCustomElements() {\r\n  customElements.whenDefined('custom-drawer').then(() => {\r\n    customDrawer.data = [{\r\n      path: `<path d=\"M9.984 20.016h-4.969v-8.016h-3l9.984-9 9.984 9h-3v8.016h-4.969v-6h-4.031v6z\"></path>\r\n  `,\r\n      name: \"首页\",\r\n      href: \"/\"\r\n    }, {\r\n      path: `<path d=\"M18.984 3h-14.016q-0.797 0-1.383 0.586t-0.586 1.43v13.969q0 0.844 0.586 1.43t1.43 0.586h9.984l6-6v-9.984q0-0.844-0.586-1.43t-1.43-0.586zM6.984 8.016h10.031v1.969h-10.031v-1.969zM12 14.016h-5.016v-2.016h5.016v2.016zM14.016 19.5v-5.484h5.484z\"></path>`, name: \"新建文档\",\r\n      href: \"/editor\",\r\n      divider: true\r\n    }];\r\n  });\r\n}\r\nfunction bindElementsAndEvents() {\r\n  document.querySelectorAll('[bind]').forEach(element => {\r\n    if (element.getAttribute('bind')) {\r\n      window[element.getAttribute('bind')] = element;\r\n    }\r\n    [...element.attributes].filter(attr => attr.nodeName.startsWith('@')).forEach(attr => {\r\n      if (!attr.value) return;\r\n      element.addEventListener(attr.nodeName.slice(1), evt => {\r\n        window[attr.value](evt);\r\n      });\r\n    });\r\n  })\r\n}\r\nasync function loadLabels() {\r\n  const res = await fetch(`${baseUri}/api/note?action=2`);\r\n  labels = await res.json();\r\n  customElements.whenDefined('custom-buttons').then(() => {\r\n    customButtons.data = labels;\r\n  })\r\n}\r\nasync function onButtonsHandler(evt) {\r\n  this.wrapper.innerHTML = \"\";\r\n  const tag = labels.filter(x => x.id == evt.detail)[0].title;\r\n  history.pushState(null, null, `?tag=${encodeURIComponent(tag)}`)\r\n  render(tag);\r\n}\r\nfunction onCustomDrawer(evt) {\r\n  location.href = evt.detail;\r\n}\r\nasync function render(tag) {\r\n  const res = await fetch(`${baseUri}/api/note?tag=${encodeURIComponent(tag)}`);\r\n  (await res.json()).forEach(x => {\r\n    const div = document.createElement('div');\r\n    div.style = '-webkit-tap-highlight-color: transparent;border-top: 1px solid #dadce0;padding: 8px 0;min-height: 43px;box-sizing: border-box;display: flex;-webkit-box-pack: justify;justify-content: space-between;-webkit-box-align: center;align-items: center';\r\n    const text = document.createElement('div');\r\n    // .6875rem\r\n    text.style = `-webkit-tap-highlight-color: transparent;display: flex;-webkit-box-align: center;align-items: center;letter-spacing: .07272727em;font-family: Roboto,Arial,sans-serif;font-size: 14px;font-weight: 500;color: #5f6368;line-height: .6875rem;margin-right: 8px;white-space: nowrap`;\r\n    div.appendChild(text);\r\n    text.textContent = x.title;\r\n    this.wrapper.appendChild(div);\r\n    div.addEventListener('click', evt => {\r\n      location.href = `${baseUri}/editor?id=${x.id}`;\r\n    })\r\n  })\r\n}\r\nfunction showDrawer(evt) {\r\n  evt.stopPropagation();\r\n  customDrawer.setAttribute('expand', 'true');\r\n}\r\n////////////////////////////////\r\nlet baseUri = window.location.host === '127.0.0.1:5500' ? 'http://192.168.8.55:10808' : '';\r\nlet labels;\r\nfunction initialize() {\r\n  bindElementsAndEvents();\r\n  bindCustomElements();\r\n  loadLabels();\r\n  window.addEventListener('popstate', evt => {\r\n    let tag = new URL(window.location).searchParams.get('tag');\r\n    this.wrapper.innerHTML = \"\";\r\n    customButtons.selected = labels.filter(x => x.title == tag)[0].id;\r\n    render(tag);\r\n  })\r\n  const tag = new URL(window.location).searchParams.get('tag');\r\n  if (tag) {\r\n    render(tag);\r\n  }\r\n\r\n}\r\ninitialize();\r\nfunction onClose() {\r\n  searchWrapper.style.display = 'none'\r\n}\r\nasync function onInput(evt) {\r\n  if (evt.key === \"Enter\") {\r\n    evt.preventDefault();\r\n    let q = input.value;\r\n    let action = 3;\r\n    if (q.startsWith(\"*\")) {\r\n      action = 4;\r\n      q = q.substring(1);\r\n    }\r\n    const res = await fetch(`${baseUri}/api/note?action=${action}&q=${encodeURIComponent(q)}`);\r\n    const items = await res.json();\r\n    this.wrapper.innerHTML = '';\r\n    console.log(items);\r\n    items.forEach(x => {\r\n      const div = document.createElement('div');\r\n      div.style = '-webkit-tap-highlight-color: transparent;border-top: 1px solid #dadce0;padding: 8px 0;min-height: 43px;box-sizing: border-box;display: flex;-webkit-box-pack: justify;justify-content: space-between;-webkit-box-align: center;align-items: center';\r\n      const text = document.createElement('div');\r\n      // .6875rem\r\n      text.style = `-webkit-tap-highlight-color: transparent;display: flex;-webkit-box-align: center;align-items: center;letter-spacing: .07272727em;font-family: Roboto,Arial,sans-serif;font-size: 14px;font-weight: 500;color: #5f6368;line-height: .6875rem;margin-right: 8px;white-space: nowrap`;\r\n      div.appendChild(text);\r\n      text.textContent = x.title;\r\n      this.wrapper.appendChild(div);\r\n      div.addEventListener('click', evt => {\r\n        location.href = `${baseUri}/editor?id=${x.id}`;\r\n      })\r\n    });\r\n    searchWrapper.style.display = 'none'\r\n\r\n  }\r\n}\r\n\r\nfunction onSearch() {\r\n  searchWrapper.style.display = 'block'\r\n}</script></body>\r\n\r\n</html>"